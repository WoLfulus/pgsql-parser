{"version":3,"sources":["../src/deparser.js"],"names":["dotty","require","fail","type","node","Error","JSON","stringify","RESERVED_WORDS","isReserved","value","includes","toLowerCase","needsQuotes","match","keys","_","compact","o","filter","p","toString","length","parens","string","indent","text","count","Deparser","deparse","query","deparseQuery","constructor","tree","map","join","deparseNodes","nodes","context","isArray","list","separator","prefix","l","listQuotes","split","a","quote","trim","escape","literal","replace","convertTypeName","typeName","size","names","args","name","catalog","mods","String","str","res","item","isNumber","values","stmt","output","push","rulename","event","relation","instead","whereClause","actions","kind","lexpr","schema","operator","rexpr","op","FuncCall","Null","aliasname","colnames","elements","val","lidx","uidx","arg","i","indirection","subnode","A_Star","substring","boolop","tests","booltesttype","defresult","collname","typevar","coldeflist","renameType","relationType","subname","newname","colname","raw_default","constraints","collClause","get","KEYWORDS","fields","field","toUpperCase","objtype","object","Array","objargs","comment","ctename","aliascolnames","ctequery","defname","A_Const","Integer","ival","defnamespace","params","agg_star","funcname","order","withinGroup","agg_within_group","agg_order","call","agg_distinct","func_variadic","agg_filter","over","content","unique","concurrent","idxname","indexParams","expr","cols","selectStmt","onConflictClause","clause","OnConflictClause","infer","InferClause","indexElems","conname","action","UpdateStmt","source","targetList","ResTarget","MultiAssignRef","target","fromClause","from","returningList","returning","rel","larg","isNatural","jointype","quals","usingClause","rarg","JoinExpr","alias","using","wrapped","strengths","strength","lockedRels","nulltesttype","number","lateral","funcs","functions","funcCall","calls","is_rowsfrom","ordinality","defList","subquery","method","repeatable","inhOpt","relpersistence","schemaname","relname","row_format","console","log","withClause","valuesLists","sets","all","distinctClause","e","intoClause","lists","groupClause","havingClause","windowClause","windows","w","window","WindowDef","sortClause","limitCount","limitOffset","lockingClause","forEach","options","elem","find","el","hasOwnProperty","DefElem","roleSpec","relkind","inh","missing_ok","cmds","subtype","def","vals","if_not_exists","extname","opt","removeType","objects","behavior","policy_name","table","cmd_name","roles","with_check","qual","view","into","isconstraint","trigname","timing","TRIGGER_EVENTS","INSERT","DELETE","UPDATE","TRUNCATE","events","columns","transitionRels","TriggerTransition","isNew","isTable","deferrable","initdeferred","row","whenClause","exists","domainname","tableElts","inhRelations","Number","constraint","contype","pktable","pk_attrs","fk_attrs","ConstraintStmt","getExclusionGroup","nde","out","exclusions","excl","IndexElem","b","access_method","CONSTRAINT_TYPES","CONSTR_FOREIGN","ReferenceConstraint","raw_expr","fk_del_action","fk_upd_action","fk_matchtype","is_no_inherit","skip_validation","CONSTR_EXCLUSION","ExclusionConstraint","priv_name","VARIABLESET_TYPES","VAR_SET_VALUE","is_local","VAR_SET_DEFAULT","VAR_SET_CURRENT","VAR_SET_MULTI","TRANSACTION","VAR_RESET","VAR_RESET_ALL","funcargs","mode","argType","defexpr","parameters","parametersList","FunctionParameter","returns","returnType","option","roletype","ROLESPEC_TYPES","ROLESPEC_CSTRING","rolename","ROLESPEC_CURRENT_USER","ROLESPEC_SESSION_USER","ROLESPEC_PUBLIC","getTypeFromNode","nodeObj","GRANTOBJECT_TYPES","ACL_OBJECT_RELATION","targtype","GRANTTARGET_TYPES","ACL_TARGET_ALL_IN_SCHEMA","ACL_TARGET_DEFAULTS","ACL_OBJECT_SEQUENCE","ACL_OBJECT_DATABASE","ACL_OBJECT_DOMAIN","ACL_OBJECT_FDW","ACL_OBJECT_FOREIGN_SERVER","ACL_OBJECT_FUNCTION","ACL_OBJECT_LANGUAGE","ACL_OBJECT_LARGEOBJECT","ACL_OBJECT_NAMESPACE","ACL_OBJECT_TABLESPACE","ACL_OBJECT_TYPE","ACL_OBJECT_COLUMN","is_grant","grant_option","privileges","grantees","granted_roles","grantee_roles","admin_opt","roleOption","val1","val2","stmt_type","ROLESTMT_TYPES","ROLESTMT_USER","ROLESTMT_GROUP","role","opts","search","begin","nodeOpts","index","indexOf","obj","set","flag","lopts","start","TRANSACTIONSTMT_TYPES","TRANS_STMT_BEGIN","TRANS_STMT_START","TRANS_STMT_COMMIT","TRANS_STMT_ROLLBACK","TRANS_STMT_SAVEPOINT","TRANS_STMT_RELEASE","TRANS_STMT_ROLLBACK_TO","TRANS_STMT_PREPARE","gid","TRANS_STMT_COMMIT_PREPARED","TRANS_STMT_ROLLBACK_PREPARED","sortby_dir","SORTBYDIR_TYPES","SORTBY_ASC","SORTBY_DESC","SORTBY_USING","useOp","SORTBY_DEFAULT","sortby_nulls","SORTBYNULLS_TYPES","SORTBY_NULLS_FIRST","SORTBY_NULLS_LAST","objname","subLinkType","subselect","testexpr","operName","last","deparseInterval","setof","typmods","arrayBounds","result","empty","partitionClause","orderClause","frameOptions","deparseFrameOptions","refname","startOffset","endOffset","windowParts","useParens","partition","orders","recursive","ctes","refName","FRAMEOPTION_NONDEFAULT","FRAMEOPTION_RANGE","FRAMEOPTION_ROWS","FRAMEOPTION_BETWEEN","FRAMEOPTION_START_UNBOUNDED_PRECEDING","FRAMEOPTION_END_UNBOUNDED_PRECEDING","FRAMEOPTION_START_UNBOUNDED_FOLLOWING","FRAMEOPTION_END_UNBOUNDED_FOLLOWING","FRAMEOPTION_START_CURRENT_ROW","FRAMEOPTION_END_CURRENT_ROW","FRAMEOPTION_START_VALUE_PRECEDING","FRAMEOPTION_END_VALUE_PRECEDING","FRAMEOPTION_START_VALUE_FOLLOWING","FRAMEOPTION_END_VALUE_FOLLOWING","between","intervals","interval","part","mask","MASKS","BITS","invert","INTERVALS","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","INTERVAL_FULL_RANGE"],"mappings":"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","file":"deparser.js","sourcesContent":["import _ from 'lodash';\nimport { format } from 'util';\nimport {\n  objtypeName,\n  objtypeIs,\n  getConstraintFromConstrType,\n  ROLESPEC_TYPES,\n  GRANTTARGET_TYPES,\n  GRANTOBJECT_TYPES,\n  CONSTRAINT_TYPES,\n  VARIABLESET_TYPES,\n  ROLESTMT_TYPES,\n  TRANSACTIONSTMT_TYPES,\n  SORTBYDIR_TYPES,\n  SORTBYNULLS_TYPES\n} from './types';\n\nconst dotty = require('dotty');\n\nconst fail = (type, node) => {\n  throw new Error(format('Unhandled %s node: %s', type, JSON.stringify(node)));\n};\n\n// select word from pg_get_keywords() where catcode = 'R';\nconst RESERVED_WORDS = [\n  'all',\n  'analyse',\n  'analyze',\n  'and',\n  'any',\n  'array',\n  'as',\n  'asc',\n  'asymmetric',\n  'both',\n  'case',\n  'cast',\n  'check',\n  'collate',\n  'column',\n  'constraint',\n  'create',\n  'current_catalog',\n  'current_date',\n  'current_role',\n  'current_time',\n  'current_timestamp',\n  'current_user',\n  'default',\n  'deferrable',\n  'desc',\n  'distinct',\n  'do',\n  'else',\n  'end',\n  'except',\n  'false',\n  'fetch',\n  'for',\n  'foreign',\n  'from',\n  'grant',\n  'group',\n  'having',\n  'in',\n  'initially',\n  'intersect',\n  'into',\n  'lateral',\n  'leading',\n  'limit',\n  'localtime',\n  'localtimestamp',\n  'not',\n  'null',\n  'offset',\n  'on',\n  'only',\n  'or',\n  'order',\n  'placing',\n  'primary',\n  'references',\n  'returning',\n  'select',\n  'session_user',\n  'some',\n  'symmetric',\n  'table',\n  'then',\n  'to',\n  'trailing',\n  'true',\n  'union',\n  'unique',\n  'user',\n  'using',\n  'variadic',\n  'when',\n  'where',\n  'window',\n  'with'\n];\n\nconst isReserved = value => RESERVED_WORDS.includes(value.toLowerCase());\n\n// usually the AST lowercases all the things, so if we\n// have both, the author most likely used double quotes\nconst needsQuotes = value =>\n  value.match(/[a-z]+[\\W\\w]*[A-Z]+|[A-Z]+[\\W\\w]*[a-z]+/) ||\n  value.match(/\\W/) ||\n  isReserved(value);\n\nconst { keys } = _;\n\nconst compact = o => {\n  return _.filter(_.compact(o), p => {\n    if (p == null) {\n      return false;\n    }\n\n    return p.toString().length;\n  });\n};\n\nconst parens = string => {\n  return '(' + string + ')';\n};\n\nconst indent = (text, count = 1) => text;\n\nexport default class Deparser {\n  static deparse(query) {\n    return new Deparser(query).deparseQuery();\n  }\n\n  constructor(tree) {\n    this.tree = tree;\n  }\n\n  deparseQuery() {\n    return this.tree.map(node => `${this.deparse(node)};`).join('\\n\\n');\n  }\n\n  deparseNodes(nodes, context) {\n    return nodes.map(node => {\n      return _.isArray(node) ? this.list(node) : this.deparse(node, context);\n    });\n  }\n\n  list(nodes, separator = ', ', prefix = '') {\n    if (!nodes) {\n      return '';\n    }\n\n    return this.deparseNodes(nodes)\n      .map(l => `${prefix}${l}`)\n      .join(separator);\n  }\n\n  listQuotes(nodes, separator = ', ') {\n    return this.list(nodes, separator)\n      .split(separator)\n      .map(a => this.quote(a.trim()))\n      .join(separator);\n  }\n\n  quote(value) {\n    if (value == null) {\n      return null;\n    }\n\n    if (_.isArray(value)) {\n      return value.map(o => this.quote(o));\n    }\n\n    if (needsQuotes(value)) {\n      return '\"' + value + '\"';\n    }\n    return value;\n  }\n\n  // SELECT encode(E'''123\\\\000\\\\001', 'base64')\n  escape(literal) {\n    return \"'\" + literal.replace(/'/g, \"''\") + \"'\";\n  }\n\n  convertTypeName(typeName, size) {\n    switch (typeName) {\n      case 'bpchar':\n        if (size != null) {\n          return 'char';\n        }\n        // return `pg_catalog.bpchar` below so that the following is symmetric\n        // SELECT char 'c' = char 'c' AS true\n        return 'pg_catalog.bpchar';\n      case 'varchar':\n        return 'varchar';\n      case 'numeric':\n        return 'numeric';\n      case 'bool':\n        return 'boolean';\n      case 'int2':\n        return 'smallint';\n      case 'int4':\n        return 'int';\n      case 'int8':\n        return 'bigint';\n      case 'real':\n      case 'float4':\n        return 'real';\n      case 'float8':\n        return 'pg_catalog.float8';\n      case 'text':\n        // SELECT EXTRACT(CENTURY FROM CURRENT_DATE)>=21 AS True\n        return 'pg_catalog.text';\n      case 'date':\n        return 'pg_catalog.date';\n      case 'time':\n        return 'time';\n      case 'timetz':\n        return 'pg_catalog.timetz';\n      case 'timestamp':\n        return 'timestamp';\n      case 'timestamptz':\n        return 'pg_catalog.timestamptz';\n      case 'interval':\n        return 'interval';\n      case 'bit':\n        return 'bit';\n      default:\n        throw new Error(format('Unhandled data type: %s', typeName));\n    }\n  }\n\n  type(names, args) {\n    const [ catalog, type ] = names.map(name => this.deparse(name));\n\n    const mods = (name, size) => {\n      if (size != null) {\n        return name + '(' + size + ')';\n      }\n\n      return name;\n    };\n\n    // handle the special \"char\" (in quotes) type\n    if (names[0].String.str === 'char') {\n      names[0].String.str = '\"char\"';\n    }\n\n    if (catalog !== 'pg_catalog') {\n      return mods(this.list(names, '.'), args);\n    }\n\n    const res = this.convertTypeName(type, args);\n\n    return mods(res, args);\n  }\n\n  deparse(item, context) {\n    if (item == null) {\n      return null;\n    }\n\n    if (_.isNumber(item)) {\n      return item;\n    }\n\n    const type = keys(item)[0];\n    const node = _.values(item)[0];\n\n    if (this[type] == null) {\n      throw new Error(type + ' is not implemented');\n    }\n\n    return this[type](node, context);\n  }\n\n  ['RawStmt'](node) {\n    return this.deparse(node.stmt);\n  }\n\n  ['RuleStmt'](node) {\n    const output = [];\n    output.push('CREATE');\n    output.push('RULE');\n    if (node.rulename === '_RETURN') {\n      // special rules\n      output.push('\"_RETURN\"');\n    } else {\n      output.push(node.rulename);\n    }\n    output.push('AS');\n    output.push('ON');\n    switch (node.event) {\n      case 1:\n        output.push('SELECT');\n        break;\n      case 2:\n        output.push('UPDATE');\n        break;\n      case 3:\n        output.push('INSERT');\n        break;\n      case 4:\n        output.push('DELETE');\n        break;\n      default:\n        throw new Error('event type not yet implemented for RuleStmt');\n    }\n    output.push('TO');\n    output.push(this.deparse(node.relation));\n    if (node.instead) {\n      output.push('DO');\n      output.push('INSTEAD');\n    }\n    if (node.whereClause) {\n      output.push('WHERE');\n      output.push(this.deparse(node.whereClause));\n      output.push('DO');\n    }\n    if (!node.actions || !node.actions.length) {\n      output.push('NOTHING');\n    } else {\n      // TODO how do multiple actions happen?\n      output.push(this.deparse(node.actions[0]));\n    }\n    return output.join(' ');\n  }\n\n  ['A_Expr'](node, context) {\n    const output = [];\n\n    switch (node.kind) {\n      case 0: // AEXPR_OP\n        if (node.lexpr) {\n          output.push(parens(this.deparse(node.lexpr)));\n        }\n\n        if (node.name.length > 1) {\n          const schema = this.deparse(node.name[0]);\n          const operator = this.deparse(node.name[1]);\n          output.push(`OPERATOR(${schema}.${operator})`);\n        } else {\n          output.push(this.deparse(node.name[0], context));\n        }\n\n        if (node.rexpr) {\n          output.push(parens(this.deparse(node.rexpr, context)));\n        }\n\n        if (output.length === 2) {\n          return parens(output.join(''));\n        }\n\n        return parens(output.join(' '));\n\n      case 1: // AEXPR_OP_ANY\n        output.push(this.deparse(node.lexpr));\n        output.push(format('ANY (%s)', this.deparse(node.rexpr, context)));\n        return output.join(` ${this.deparse(node.name[0], context)} `);\n\n      case 2: // AEXPR_OP_ALL\n        output.push(this.deparse(node.lexpr, context));\n        output.push(format('ALL (%s)', this.deparse(node.rexpr, context)));\n        return output.join(` ${this.deparse(node.name[0], context)} `);\n\n      case 3: // AEXPR_DISTINCT\n        return format(\n          '%s IS DISTINCT FROM %s',\n          this.deparse(node.lexpr, context),\n          this.deparse(node.rexpr, context)\n        );\n\n      case 4: // AEXPR_NULLIF\n        return format(\n          'NULLIF(%s, %s)',\n          this.deparse(node.lexpr, context),\n          this.deparse(node.rexpr, context)\n        );\n\n      case 5: {\n        // AEXPR_OF\n        const op = node.name[0].String.str === '=' ? 'IS OF' : 'IS NOT OF';\n        return format(\n          '%s %s (%s)',\n          this.deparse(node.lexpr, context),\n          op,\n          this.list(node.rexpr, context)\n        );\n      }\n\n      case 6: {\n        // AEXPR_IN\n        const operator = node.name[0].String.str === '=' ? 'IN' : 'NOT IN';\n\n        return format(\n          '%s %s (%s)',\n          this.deparse(node.lexpr, context),\n          operator,\n          this.list(node.rexpr, context)\n        );\n      }\n\n      case 7: {\n        // AEXPR_IN\n        const operator = node.name[0].String.str === '<>' ? 'NOT IN' : 'IN';\n\n        return format(\n          '%s %s (%s)',\n          this.deparse(node.lexpr, context),\n          operator,\n          this.list(node.rexpr, context)\n        );\n      }\n\n      case 8:\n        // AEXPR_LIKE\n        output.push(this.deparse(node.lexpr, context));\n\n        if (node.name[0].String.str === '!~~') {\n          output.push(\n            format('NOT LIKE (%s)', this.deparse(node.rexpr, context))\n          );\n        } else {\n          output.push(format('LIKE (%s)', this.deparse(node.rexpr, context)));\n        }\n\n        return output.join(' ');\n\n      case 9:\n        // AEXPR_ILIKE\n        output.push(this.deparse(node.lexpr, context));\n\n        if (node.name[0].String.str === '!~~*') {\n          output.push(\n            format('NOT ILIKE (%s)', this.deparse(node.rexpr, context))\n          );\n        } else {\n          output.push(format('ILIKE (%s)', this.deparse(node.rexpr, context)));\n        }\n\n        return output.join(' ');\n\n      case 10:\n        // AEXPR_SIMILAR\n        // SIMILAR TO emits a similar_escape FuncCall node with the first argument\n        output.push(this.deparse(node.lexpr, context));\n\n        if (node.name[0].String.str === '!~') {\n          if (this.deparse(node.rexpr.FuncCall.args[1].Null, context)) {\n            output.push(\n              format(\n                'NOT SIMILAR TO %s',\n                this.deparse(node.rexpr.FuncCall.args[0], context)\n              )\n            );\n          } else {\n            output.push(\n              format(\n                'NOT SIMILAR TO %s ESCAPE %s',\n                this.deparse(node.rexpr.FuncCall.args[0], context),\n                this.deparse(node.rexpr.FuncCall.args[1], context)\n              )\n            );\n          }\n        } else if (this.deparse(node.rexpr.FuncCall.args[1].Null, context)) {\n          output.push(\n            format(\n              'SIMILAR TO %s',\n              this.deparse(node.rexpr.FuncCall.args[0], context)\n            )\n          );\n        } else {\n          output.push(\n            format(\n              'SIMILAR TO %s ESCAPE %s',\n              this.deparse(node.rexpr.FuncCall.args[0], context),\n              this.deparse(node.rexpr.FuncCall.args[1], context)\n            )\n          );\n        }\n\n        return output.join(' ');\n\n      case 11:\n        // AEXPR_BETWEEN\n        output.push(this.deparse(node.lexpr, context));\n        output.push(\n          format(\n            'BETWEEN %s AND %s',\n            this.deparse(node.rexpr[0], context),\n            this.deparse(node.rexpr[1], context)\n          )\n        );\n        return output.join(' ');\n\n      case 12:\n        // AEXPR_NOT_BETWEEN\n        output.push(this.deparse(node.lexpr, context));\n        output.push(\n          format(\n            'NOT BETWEEN %s AND %s',\n            this.deparse(node.rexpr[0], context),\n            this.deparse(node.rexpr[1], context)\n          )\n        );\n        return output.join(' ');\n\n      default:\n        return fail('A_Expr', node);\n    }\n  }\n\n  ['Alias'](node, context) {\n    const name = node.aliasname;\n\n    const output = [ 'AS' ];\n\n    if (node.colnames) {\n      output.push(this.quote(name) + parens(this.listQuotes(node.colnames)));\n    } else {\n      output.push(this.quote(name));\n    }\n\n    return output.join(' ');\n  }\n\n  ['A_ArrayExpr'](node) {\n    return format('ARRAY[%s]', this.list(node.elements));\n  }\n\n  ['A_Const'](node, context) {\n    if (node.val.String) {\n      return this.escape(this.deparse(node.val, context));\n    }\n\n    return this.deparse(node.val, context);\n  }\n\n  ['A_Indices'](node) {\n    if (node.lidx) {\n      return format(\n        '[%s:%s]',\n        this.deparse(node.lidx),\n        this.deparse(node.uidx)\n      );\n    }\n\n    return format('[%s]', this.deparse(node.uidx));\n  }\n\n  ['A_Indirection'](node) {\n    const output = [ `(${this.deparse(node.arg)})` ];\n\n    // TODO(zhm) figure out the actual rules for when a '.' is needed\n    //\n    // select a.b[0] from a;\n    // select (select row(1)).*\n    // select c2[2].f2 from comptable\n    // select c2.a[2].f2[1].f3[0].a1 from comptable\n\n    for (let i = 0; i < node.indirection.length; i++) {\n      const subnode = node.indirection[i];\n\n      if (subnode.String || subnode.A_Star) {\n        const value = subnode.A_Star ? '*' : this.quote(subnode.String.str);\n\n        output.push(`.${value}`);\n      } else {\n        output.push(this.deparse(subnode));\n      }\n    }\n\n    return output.join('');\n  }\n\n  ['A_Star'](node, context) {\n    return '*';\n  }\n\n  ['BitString'](node) {\n    const prefix = node.str[0];\n    return `${prefix}'${node.str.substring(1)}'`;\n  }\n\n  ['BoolExpr'](node) {\n    switch (node.boolop) {\n      case 0:\n        return parens(this.list(node.args, ' AND '));\n      case 1:\n        return parens(this.list(node.args, ' OR '));\n      case 2:\n        return format('NOT (%s)', this.deparse(node.args[0]));\n      default:\n        return fail('BoolExpr', node);\n    }\n  }\n\n  ['BooleanTest'](node) {\n    const output = [];\n\n    output.push(this.deparse(node.arg));\n\n    const tests = [\n      'IS TRUE',\n      'IS NOT TRUE',\n      'IS FALSE',\n      'IS NOT FALSE',\n      'IS UNKNOWN',\n      'IS NOT UNKNOWN'\n    ];\n\n    output.push(tests[node.booltesttype]);\n\n    return output.join(' ');\n  }\n\n  ['CaseExpr'](node) {\n    const output = [ 'CASE' ];\n\n    if (node.arg) {\n      output.push(this.deparse(node.arg));\n    }\n\n    for (let i = 0; i < node.args.length; i++) {\n      output.push(this.deparse(node.args[i]));\n    }\n\n    if (node.defresult) {\n      output.push('ELSE');\n      output.push(this.deparse(node.defresult));\n    }\n\n    output.push('END');\n\n    return output.join(' ');\n  }\n\n  ['CoalesceExpr'](node) {\n    return format('COALESCE(%s)', this.list(node.args));\n  }\n\n  ['CollateClause'](node) {\n    const output = [];\n\n    if (node.arg) {\n      output.push(this.deparse(node.arg));\n    }\n\n    output.push('COLLATE');\n\n    if (node.collname) {\n      output.push(this.quote(this.deparseNodes(node.collname)));\n    }\n\n    return output.join(' ');\n  }\n\n  ['CompositeTypeStmt'](node) {\n    const output = [];\n\n    output.push('CREATE TYPE');\n    output.push(this.deparse(node.typevar));\n    output.push('AS');\n    output.push('(');\n    output.push(this.list(node.coldeflist, ',\\n', '\\t'));\n    output.push(')');\n\n    return output.join(' ');\n  }\n\n  ['RenameStmt'](node) {\n    const output = [];\n\n    if (!objtypeIs(node.renameType, 'OBJECT_COLUMN')) {\n      throw new Error('renameType not yet implemented');\n    }\n    if (!objtypeIs(node.relationType, 'OBJECT_TABLE')) {\n      throw new Error('relationType not yet implemented');\n    }\n\n    output.push('ALTER');\n    output.push('TABLE');\n    output.push(this.deparse(node.relation));\n    output.push('RENAME');\n    output.push('COLUMN');\n    output.push(node.subname);\n    output.push('TO');\n    output.push(node.newname);\n\n    return output.join(' ');\n  }\n\n  ['ColumnDef'](node) {\n    const output = [ this.quote(node.colname) ];\n\n    output.push(this.deparse(node.typeName));\n\n    if (node.raw_default) {\n      output.push('USING');\n      output.push(this.deparse(node.raw_default));\n    }\n\n    if (node.constraints) {\n      output.push(this.list(node.constraints, ' '));\n    }\n\n    if (node.collClause) {\n      output.push('COLLATE');\n      const str = dotty.get(\n        node,\n        'collClause.CollateClause.collname.0.String.str'\n      );\n      output.push(this.quote(str));\n    }\n\n    return _.compact(output).join(' ');\n  }\n\n  ['SQLValueFunction'](node) {\n    if (node.op === 0) {\n      return 'CURRENT_DATE';\n    }\n    if (node.op === 3) {\n      return 'CURRENT_TIMESTAMP';\n    }\n    if (node.op === 10) {\n      return 'CURRENT_USER';\n    }\n    if (node.op === 12) {\n      return 'SESSION_USER';\n    }\n    throw new Error(`op=${node.op} SQLValueFunction not implemented`);\n  }\n\n  ['ColumnRef'](node, context) {\n    const KEYWORDS = [ 'old', 'new' ];\n    const fields = node.fields.map(field => {\n      if (field.String) {\n        const value = this.deparse(field);\n        if (context === 'trigger' && KEYWORDS.includes(value.toLowerCase())) {\n          return value.toUpperCase();\n        }\n        return this.quote(value);\n      }\n\n      return this.deparse(field);\n    });\n    return fields.join('.');\n  }\n\n  ['CommentStmt'](node) {\n    const output = [];\n\n    output.push('COMMENT');\n    output.push('ON');\n    output.push(objtypeName(node.objtype));\n\n    if (objtypeIs(node.objtype, 'OBJECT_CAST')) {\n      output.push('(');\n      output.push(this.deparse(node.object[0]));\n      output.push('AS');\n      output.push(this.deparse(node.object[1]));\n      output.push(')');\n    } else if (objtypeIs(node.objtype, 'OBJECT_DOMCONSTRAINT')) {\n      output.push(this.deparse(node.object[1]));\n      output.push('ON');\n      output.push('DOMAIN');\n      output.push(this.deparse(node.object[0]));\n    } else if (\n      objtypeIs(node.objtype, 'OBJECT_OPCLASS') ||\n      objtypeIs(node.objtype, 'OBJECT_OPFAMILY')\n    ) {\n      output.push(this.deparse(node.object[1]));\n      output.push('USING');\n      output.push(this.deparse(node.object[0]));\n    } else if (objtypeIs(node.objtype, 'OBJECT_OPERATOR')) {\n      output.push(this.deparse(node.object, 'noquotes'));\n    } else if (objtypeIs(node.objtype, 'OBJECT_POLICY')) {\n      output.push(this.deparse(node.object[1]));\n      output.push('ON');\n      output.push(this.deparse(node.object[0]));\n    } else if (objtypeIs(node.objtype, 'OBJECT_ROLE')) {\n      output.push(this.deparse(node.object));\n    } else if (objtypeIs(node.objtype, 'OBJECT_RULE')) {\n      output.push(this.deparse(node.object[1]));\n      output.push('ON');\n      output.push(this.deparse(node.object[0]));\n    } else if (objtypeIs(node.objtype, 'OBJECT_TABCONSTRAINT')) {\n      if (node.object.length === 3) {\n        output.push(this.deparse(node.object[2]));\n        output.push('ON');\n        output.push(this.deparse(node.object[0]));\n        output.push('.');\n        output.push(this.deparse(node.object[1]));\n      } else {\n        output.push(this.deparse(node.object[1]));\n        output.push('ON');\n        output.push(this.deparse(node.object[0]));\n      }\n    } else if (objtypeIs(node.objtype, 'OBJECT_TRANSFORM')) {\n      output.push('FOR');\n      output.push(this.deparse(node.object[0]));\n      output.push('LANGUAGE');\n      output.push(this.deparse(node.object[1]));\n    } else if (objtypeIs(node.objtype, 'OBJECT_TRIGGER')) {\n      output.push(this.deparse(node.object[1]));\n      output.push('ON');\n      output.push(this.deparse(node.object[0]));\n    } else {\n      if (objtypeIs(node.objtype, 'OBJECT_LARGEOBJECT')) {\n        output.push(dotty.get(node, 'object.Integer.ival'));\n      } else if (node.object instanceof Array) {\n        output.push(this.listQuotes(node.object, '.'));\n      } else {\n        output.push(this.deparse(node.object));\n      }\n\n      if (node.objargs) {\n        output.push('(');\n        output.push(this.list(node.objargs));\n        output.push(')');\n      }\n    }\n\n    output.push('IS');\n\n    if (node.comment) {\n      output.push(`E'${node.comment}'`);\n    } else {\n      output.push('NULL');\n    }\n\n    return output.join(' ');\n  }\n\n  ['CommonTableExpr'](node) {\n    const output = [];\n\n    output.push(node.ctename);\n\n    if (node.aliascolnames) {\n      output.push(\n        format('(%s)', this.quote(this.deparseNodes(node.aliascolnames)))\n      );\n    }\n\n    output.push(format('AS (%s)', this.deparse(node.ctequery)));\n\n    return output.join(' ');\n  }\n\n  ['DefElem'](node) {\n    if (node.defname === 'transaction_isolation') {\n      return format(\n        'ISOLATION LEVEL %s',\n        node.arg.A_Const.val.String.str.toUpperCase()\n      );\n    }\n\n    if (node.defname === 'transaction_read_only') {\n      return node.arg.A_Const.val.Integer.ival === 0\n        ? 'READ WRITE'\n        : 'READ ONLY';\n    }\n\n    if (node.defname === 'transaction_deferrable') {\n      return node.arg.A_Const.val.Integer.ival === 0\n        ? 'NOT DEFERRABLE'\n        : 'DEFERRABLE';\n    }\n\n    if (node.defname === 'set') {\n      return this.deparse(node.arg);\n    }\n\n    let name = node.defname;\n    if (node.defnamespace) {\n      name = `${node.defnamespace}.${node.defname}`;\n    }\n\n    if (node.arg) {\n      return `${name} = ${this.deparse(node.arg)}`;\n    }\n    return name;\n  }\n\n  ['DoStmt'](node) {\n    return `DO $$\\n  ${dotty\n      .get(node, 'args.0.DefElem.arg.String.str')\n      .trim()} $$`;\n  }\n\n  ['Float'](node) {\n    // wrap negative numbers in parens, SELECT (-2147483648)::int4 * (-1)::int4\n    if (node.str[0] === '-') {\n      return `(${node.str})`;\n    }\n\n    return node.str;\n  }\n\n  ['FuncCall'](node, context) {\n    const output = [];\n\n    let params = [];\n\n    if (node.args) {\n      params = node.args.map(item => {\n        return this.deparse(item);\n      });\n    }\n\n    // COUNT(*)\n    if (node.agg_star) {\n      params.push('*');\n    }\n\n    const name = this.list(node.funcname, '.');\n\n    const order = [];\n\n    const withinGroup = node.agg_within_group;\n\n    if (node.agg_order) {\n      order.push('ORDER BY');\n      order.push(this.list(node.agg_order, ', '));\n    }\n\n    const call = [];\n\n    call.push(name + '(');\n\n    if (node.agg_distinct) {\n      call.push('DISTINCT ');\n    }\n\n    // prepend variadic before the last parameter\n    // SELECT CONCAT('|', VARIADIC ARRAY['1','2','3'])\n    if (node.func_variadic) {\n      params[params.length - 1] = 'VARIADIC ' + params[params.length - 1];\n    }\n\n    call.push(params.join(', '));\n\n    if (order.length && !withinGroup) {\n      call.push(' ');\n      call.push(order.join(' '));\n    }\n\n    call.push(')');\n\n    output.push(compact(call).join(''));\n\n    if (order.length && withinGroup) {\n      output.push('WITHIN GROUP');\n      output.push(parens(order.join(' ')));\n    }\n\n    if (node.agg_filter != null) {\n      output.push(format('FILTER (WHERE %s)', this.deparse(node.agg_filter)));\n    }\n\n    if (node.over != null) {\n      output.push(format('OVER %s', this.deparse(node.over)));\n    }\n\n    return output.join(' ');\n  }\n\n  ['GroupingFunc'](node) {\n    return 'GROUPING(' + this.list(node.args) + ')';\n  }\n\n  ['GroupingSet'](node) {\n    switch (node.kind) {\n      case 0: // GROUPING_SET_EMPTY\n        return '()';\n\n      case 1: // GROUPING_SET_SIMPLE\n        return fail('GroupingSet', node);\n\n      case 2: // GROUPING_SET_ROLLUP\n        return 'ROLLUP (' + this.list(node.content) + ')';\n\n      case 3: // GROUPING_SET_CUBE\n        return 'CUBE (' + this.list(node.content) + ')';\n\n      case 4: // GROUPING_SET_SETS\n        return 'GROUPING SETS (' + this.list(node.content) + ')';\n\n      default:\n        return fail('GroupingSet', node);\n    }\n  }\n\n  ['IndexStmt'](node) {\n    const output = [];\n    output.push('CREATE');\n    if (node.unique) {\n      output.push('UNIQUE');\n    }\n    output.push('INDEX');\n    if (node.concurrent) {\n      output.push('CONCURRENTLY');\n    }\n\n    if (node.idxname) {\n      output.push(node.idxname);\n    }\n    output.push('ON');\n    output.push(this.deparse(node.relation));\n\n    if (node.indexParams) {\n      output.push('(');\n      output.push(this.list(node.indexParams));\n      output.push(')');\n    }\n\n    if (node.whereClause) {\n      output.push('WHERE');\n      output.push(this.deparse(node.whereClause));\n    }\n\n    return output.join(' ');\n  }\n\n  ['IndexElem'](node) {\n    if (node.name) {\n      return node.name;\n    }\n    if (node.expr) {\n      return this.deparse(node.expr);\n    }\n    return fail('IndexElem', node);\n  }\n\n  ['InsertStmt'](node) {\n    const output = [];\n\n    output.push('INSERT INTO');\n    output.push(this.deparse(node.relation));\n    if (node.cols && node.cols.length) {\n      output.push('(');\n      output.push(this.list(node.cols));\n      output.push(')');\n    }\n\n    if (node.selectStmt) {\n      output.push(this.deparse(node.selectStmt));\n    }\n\n    if (node.onConflictClause) {\n      const clause = node.onConflictClause.OnConflictClause;\n\n      output.push('ON CONFLICT');\n      if (clause.infer.InferClause.indexElems) {\n        output.push('(');\n        output.push(this.list(clause.infer.InferClause.indexElems));\n        output.push(')');\n      } else if (clause.infer.InferClause.conname) {\n        output.push('ON CONSTRAINT');\n        output.push(clause.infer.InferClause.conname);\n      }\n\n      switch (clause.action) {\n        case 1:\n          output.push('DO NOTHING');\n          break;\n        case 2:\n          output.push('DO');\n          output.push(this.UpdateStmt(clause));\n          break;\n        default:\n          throw new Error('unhandled CONFLICT CLAUSE');\n      }\n    }\n\n    return output.join(' ');\n  }\n\n  ['SetToDefault'](node) {\n    return 'DEFAULT';\n  }\n\n  ['MultiAssignRef'](node) {\n    const output = [];\n    output.push(this.deparse(node.source));\n    return output.join(' ');\n  }\n\n  ['DeleteStmt'](node) {\n    const output = [ '' ];\n    output.push('DELETE');\n    output.push('FROM');\n    output.push(this.deparse(node.relation));\n    if (node.whereClause) {\n      output.push('WHERE');\n      output.push(this.deparse(node.whereClause));\n    }\n    return output.join(' ');\n  }\n\n  ['UpdateStmt'](node) {\n    const output = [];\n    output.push('UPDATE');\n    output.push(this.deparse(node.relation));\n    output.push('SET');\n\n    if (node.targetList && node.targetList.length) {\n      if (\n        node.targetList[0].ResTarget &&\n        node.targetList[0].ResTarget.val &&\n        node.targetList[0].ResTarget.val.MultiAssignRef\n      ) {\n        output.push('(');\n        output.push(node.targetList.map(target => target.ResTarget.name).join(','));\n        output.push(')');\n        output.push('=');\n        output.push(this.deparse(node.targetList[0].ResTarget.val));\n      } else {\n        output.push(\n          node.targetList.map(\n            (target) => this.deparse(target, 'update')\n          ).join(',')\n        );\n      }\n    }\n\n    if (node.fromClause) {\n      output.push('FROM');\n      output.push(node.fromClause.map(from => this.deparse(from)));\n    }\n\n    if (node.whereClause) {\n      output.push('WHERE');\n      output.push(this.deparse(node.whereClause));\n    }\n\n    if (node.returningList) {\n      output.push('RETURNING');\n      output.push(node.returningList.map(returning =>\n        this.deparse(returning.ResTarget.val) +\n          (returning.ResTarget.name ? ' AS ' + this.quote(returning.ResTarget.name) : '')).join(','));\n    }\n\n    return output.join(' ');\n  }\n\n  ['Integer'](node, context) {\n    if (node.ival < 0 && context !== 'simple') {\n      return `(${node.ival})`;\n    }\n\n    return node.ival.toString();\n  }\n\n  ['IntoClause'](node) {\n    return this.deparse(node.rel);\n  }\n\n  ['JoinExpr'](node, context) {\n    const output = [];\n\n    output.push(this.deparse(node.larg));\n\n    if (node.isNatural) {\n      output.push('NATURAL');\n    }\n\n    let join = null;\n\n    switch (true) {\n      case node.jointype === 0 && node.quals != null:\n        join = 'INNER JOIN';\n        break;\n\n      case node.jointype === 0 &&\n        !node.isNatural &&\n        !(node.quals != null) &&\n        !(node.usingClause != null):\n        join = 'CROSS JOIN';\n        break;\n\n      case node.jointype === 0:\n        join = 'JOIN';\n        break;\n\n      case node.jointype === 1:\n        join = 'LEFT OUTER JOIN';\n        break;\n\n      case node.jointype === 2:\n        join = 'FULL OUTER JOIN';\n        break;\n\n      case node.jointype === 3:\n        join = 'RIGHT OUTER JOIN';\n        break;\n\n      default:\n        fail('JoinExpr', node);\n        break;\n    }\n\n    output.push(join);\n\n    if (node.rarg) {\n      // wrap nested join expressions in parens to make the following symmetric:\n      // select * from int8_tbl x cross join (int4_tbl x cross join lateral (select x.f1) ss)\n      if (node.rarg.JoinExpr != null && !(node.rarg.JoinExpr.alias != null)) {\n        output.push(`(${this.deparse(node.rarg)})`);\n      } else {\n        output.push(this.deparse(node.rarg));\n      }\n    }\n\n    if (node.quals) {\n      output.push(`ON ${this.deparse(node.quals)}`);\n    }\n\n    if (node.usingClause) {\n      const using = this.quote(this.deparseNodes(node.usingClause)).join(', ');\n\n      output.push(`USING (${using})`);\n    }\n\n    const wrapped =\n      node.rarg.JoinExpr != null || node.alias\n        ? '(' + output.join(' ') + ')'\n        : output.join(' ');\n\n    if (node.alias) {\n      return wrapped + ' ' + this.deparse(node.alias);\n    }\n\n    return wrapped;\n  }\n\n  ['LockingClause'](node) {\n    const strengths = [\n      'NONE', // LCS_NONE\n      'FOR KEY SHARE',\n      'FOR SHARE',\n      'FOR NO KEY UPDATE',\n      'FOR UPDATE'\n    ];\n\n    const output = [];\n\n    output.push(strengths[node.strength]);\n\n    if (node.lockedRels) {\n      output.push('OF');\n      output.push(this.list(node.lockedRels));\n    }\n\n    return output.join(' ');\n  }\n\n  ['MinMaxExpr'](node) {\n    const output = [];\n\n    if (node.op === 0) {\n      output.push('GREATEST');\n    } else {\n      output.push('LEAST');\n    }\n\n    output.push(parens(this.list(node.args)));\n\n    return output.join('');\n  }\n\n  ['NamedArgExpr'](node) {\n    const output = [];\n\n    output.push(node.name);\n    output.push(':=');\n    output.push(this.deparse(node.arg));\n\n    return output.join(' ');\n  }\n\n  ['Null'](node) {\n    return 'NULL';\n  }\n\n  ['NullTest'](node) {\n    const output = [ this.deparse(node.arg) ];\n\n    if (node.nulltesttype === 0) {\n      output.push('IS NULL');\n    } else if (node.nulltesttype === 1) {\n      output.push('IS NOT NULL');\n    }\n\n    return output.join(' ');\n  }\n\n  ['ParamRef'](node) {\n    if (node.number >= 0) {\n      return [ '$', node.number ].join('');\n    }\n    return '?';\n  }\n\n  ['RangeFunction'](node) {\n    const output = [];\n\n    if (node.lateral) {\n      output.push('LATERAL');\n    }\n\n    const funcs = [];\n\n    for (let i = 0; i < node.functions.length; i++) {\n      const funcCall = node.functions[i];\n      const call = [ this.deparse(funcCall[0]) ];\n\n      if (funcCall[1] && funcCall[1].length) {\n        call.push(format('AS (%s)', this.list(funcCall[1])));\n      }\n\n      funcs.push(call.join(' '));\n    }\n\n    const calls = funcs.join(', ');\n\n    if (node.is_rowsfrom) {\n      output.push(`ROWS FROM (${calls})`);\n    } else {\n      output.push(calls);\n    }\n\n    if (node.ordinality) {\n      output.push('WITH ORDINALITY');\n    }\n\n    if (node.alias) {\n      output.push(this.deparse(node.alias));\n    }\n\n    if (node.coldeflist) {\n      const defList = this.list(node.coldeflist);\n\n      if (!node.alias) {\n        output.push(` AS (${defList})`);\n      } else {\n        output.push(`(${defList})`);\n      }\n    }\n\n    return output.join(' ');\n  }\n\n  ['RangeSubselect'](node, context) {\n    let output = '';\n\n    if (node.lateral) {\n      output += 'LATERAL ';\n    }\n\n    output += parens(this.deparse(node.subquery));\n\n    if (node.alias) {\n      return output + ' ' + this.deparse(node.alias);\n    }\n\n    return output;\n  }\n\n  ['RangeTableSample'](node) {\n    const output = [];\n\n    output.push(this.deparse(node.relation));\n    output.push('TABLESAMPLE');\n    output.push(this.deparse(node.method[0]));\n\n    if (node.args) {\n      output.push(parens(this.list(node.args)));\n    }\n\n    if (node.repeatable) {\n      output.push('REPEATABLE(' + this.deparse(node.repeatable) + ')');\n    }\n\n    return output.join(' ');\n  }\n\n  ['RangeVar'](node, context) {\n    const output = [];\n\n    if (node.inhOpt === 0) {\n      output.push('ONLY');\n    }\n\n    if (node.relpersistence === 'u') {\n      output.push('UNLOGGED');\n    }\n\n    if (node.relpersistence === 't') {\n      output.push('TEMPORARY TABLE');\n    }\n\n    if (node.schemaname != null) {\n      output.push(`${this.quote(node.schemaname)}.${this.quote(node.relname)}`);\n    } else {\n      output.push(this.quote(node.relname));\n    }\n\n    if (node.alias) {\n      output.push(this.deparse(node.alias));\n    }\n\n    return output.join(' ');\n  }\n\n  ['ResTarget'](node, context) {\n    if (context === 'select') {\n      return compact([ this.deparse(node.val), this.quote(node.name) ]).join(\n        ' AS '\n      );\n    } else if (context === 'update') {\n      return compact([ node.name, this.deparse(node.val) ]).join(' = ');\n    } else if (!(node.val != null)) {\n      return this.quote(node.name);\n    }\n\n    return fail('ResTarget', node);\n  }\n\n  ['RowExpr'](node) {\n    if (node.row_format === 2) {\n      return parens(this.list(node.args));\n    }\n\n    return format('ROW(%s)', this.list(node.args));\n  }\n\n  ['ExplainStmt'](node) {\n    console.log(node);\n    const output = [];\n    output.push('EXPLAIN');\n    output.push(this.deparse(node.query));\n    return output.join(' ');\n  }\n\n  ['SelectStmt'](node, context) {\n    const output = [];\n\n    if (node.withClause) {\n      output.push(this.deparse(node.withClause));\n    }\n\n    if (node.op === 0) {\n      // VALUES select's don't get SELECT\n      if (node.valuesLists == null) {\n        output.push('SELECT');\n      }\n    } else {\n      output.push(parens(this.deparse(node.larg)));\n\n      const sets = [ 'NONE', 'UNION', 'INTERSECT', 'EXCEPT' ];\n\n      output.push(sets[node.op]);\n\n      if (node.all) {\n        output.push('ALL');\n      }\n\n      output.push(parens(this.deparse(node.rarg)));\n    }\n\n    if (node.distinctClause) {\n      if (node.distinctClause[0] != null) {\n        output.push('DISTINCT ON');\n\n        const clause = node.distinctClause\n          .map(e => this.deparse(e, 'select'))\n          .join(',\\n');\n\n        output.push(`(${clause})`);\n      } else {\n        output.push('DISTINCT');\n      }\n    }\n\n    if (node.targetList) {\n      output.push(\n        indent(node.targetList.map(e => this.deparse(e, 'select')).join(',\\n'))\n      );\n    }\n\n    if (node.intoClause) {\n      output.push('INTO');\n      output.push(indent(this.deparse(node.intoClause)));\n    }\n\n    if (node.fromClause) {\n      output.push('FROM');\n      output.push(\n        indent(node.fromClause.map(e => this.deparse(e, 'from')).join(',\\n'))\n      );\n    }\n\n    if (node.whereClause) {\n      output.push('WHERE');\n      output.push(indent(this.deparse(node.whereClause)));\n    }\n\n    if (node.valuesLists) {\n      output.push('VALUES');\n\n      const lists = node.valuesLists.map(list => {\n        return `(${this.list(list)})`;\n      });\n\n      output.push(lists.join(', '));\n    }\n\n    if (node.groupClause) {\n      output.push('GROUP BY');\n      output.push(\n        indent(node.groupClause.map(e => this.deparse(e, 'group')).join(',\\n'))\n      );\n    }\n\n    if (node.havingClause) {\n      output.push('HAVING');\n      output.push(indent(this.deparse(node.havingClause)));\n    }\n\n    if (node.windowClause) {\n      output.push('WINDOW');\n\n      const windows = [];\n\n      for (let i = 0; i < node.windowClause.length; i++) {\n        const w = node.windowClause[i];\n        const window = [];\n\n        if (w.WindowDef.name) {\n          window.push(this.quote(w.WindowDef.name) + ' AS');\n        }\n\n        window.push(parens(this.deparse(w, 'window')));\n\n        windows.push(window.join(' '));\n      }\n\n      output.push(windows.join(', '));\n    }\n\n    if (node.sortClause) {\n      output.push('ORDER BY');\n      output.push(\n        indent(node.sortClause.map(e => this.deparse(e, 'sort')).join(',\\n'))\n      );\n    }\n\n    if (node.limitCount) {\n      output.push('LIMIT');\n      output.push(indent(this.deparse(node.limitCount)));\n    }\n\n    if (node.limitOffset) {\n      output.push('OFFSET');\n      output.push(indent(this.deparse(node.limitOffset)));\n    }\n\n    if (node.lockingClause) {\n      node.lockingClause.forEach(item => {\n        return output.push(this.deparse(item));\n      });\n    }\n\n    return output.join(' ');\n  }\n\n  ['AlterDefaultPrivilegesStmt'](node) {\n    const output = [];\n    output.push('ALTER DEFAULT PRIVILEGES');\n\n    const options = dotty.get(node, 'options');\n\n    if (options) {\n      const elem = node.options.find(el => el.hasOwnProperty('DefElem'));\n\n      if (elem.DefElem.defname === 'schemas') {\n        output.push('IN SCHEMA');\n        output.push(dotty.get(elem, 'DefElem.arg.0.String.str'));\n      }\n      if (elem.DefElem.defname === 'roles') {\n        output.push('FOR ROLE');\n        const roleSpec = dotty.get(elem, 'DefElem.arg.0');\n        output.push(this.deparse(roleSpec));\n      }\n      output.push('\\n');\n    }\n    output.push(this.deparse(node.action));\n\n    return output.join(' ');\n  }\n\n  ['AlterTableStmt'](node) {\n    const output = [];\n    output.push('ALTER');\n    if (node.relkind === 32) {\n      output.push('TABLE');\n    } else if (node.relkind === 42) {\n      output.push('VIEW');\n    } else if (node.relkind === 40) {\n      output.push('TYPE');\n    } else {\n      output.push('TABLE');\n      const inh = dotty.get(node, 'relation.RangeVar.inh');\n      if (!inh) {\n        output.push('ONLY');\n      }\n    }\n    if (node.missing_ok) {\n      output.push('IF EXISTS');\n    }\n    output.push(this.deparse(node.relation));\n    output.push(this.list(node.cmds));\n\n    return output.join(' ');\n  }\n\n  ['AlterTableCmd'](node) {\n    const output = [];\n\n    if (node.subtype === 0) {\n      output.push('ADD COLUMN');\n      output.push(this.quote(node.name));\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 3) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      if (node.def) {\n        output.push('SET DEFAULT');\n        output.push(this.deparse(node.def));\n      } else {\n        output.push('DROP DEFAULT');\n      }\n    }\n\n    if (node.subtype === 4) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('DROP NOT NULL');\n    }\n\n    if (node.subtype === 5) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('SET NOT NULL');\n    }\n\n    if (node.subtype === 6) {\n      output.push('ALTER');\n      output.push(this.quote(node.name));\n      output.push('SET STATISTICS');\n      output.push(dotty.get(node, 'def.Integer.ival'));\n    }\n\n    if (node.subtype === 7) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('SET');\n      output.push('(');\n      output.push(this.list(node.def));\n      output.push(')');\n    }\n\n    if (node.subtype === 9) {\n      output.push('ALTER');\n      output.push(this.quote(node.name));\n      output.push('SET STORAGE');\n      if (node.def) {\n        output.push(this.deparse(node.def));\n      } else {\n        output.push('PLAIN');\n      }\n    }\n\n    if (node.subtype === 10) {\n      output.push('DROP');\n      if (node.missing_ok) {\n        output.push('IF EXISTS');\n      }\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 14) {\n      // output.push('ADD CONSTRAINT');\n      output.push('ADD');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 18) {\n      output.push('VALIDATE CONSTRAINT');\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 22) {\n      output.push('DROP CONSTRAINT');\n      if (node.missing_ok) {\n        output.push('IF EXISTS');\n      }\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 25) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('TYPE');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 28) {\n      output.push('CLUSTER ON');\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 29) {\n      output.push('SET WITHOUT CLUSTER');\n    }\n\n    if (node.subtype === 32) {\n      output.push('SET WITH OIDS');\n    }\n\n    if (node.subtype === 34) {\n      output.push('SET WITHOUT OIDS');\n    }\n\n    if (node.subtype === 36) {\n      output.push('SET');\n      output.push('(');\n      output.push(this.list(node.def));\n      output.push(')');\n    }\n\n    if (node.subtype === 37) {\n      output.push('RESET');\n      output.push('(');\n      output.push(this.list(node.def));\n      output.push(')');\n    }\n\n    if (node.subtype === 51) {\n      output.push('INHERIT');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 52) {\n      output.push('NO INHERIT');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 56) {\n      output.push('ENABLE ROW LEVEL SECURITY');\n    }\n    if (node.subtype === 57) {\n      output.push('DISABLE ROW LEVEL SECURITY');\n    }\n    if (node.subtype === 58) {\n      output.push('FORCE ROW SECURITY');\n    }\n    if (node.subtype === 59) {\n      output.push('NO FORCE ROW SECURITY');\n    }\n\n    return output.join(' ');\n  }\n\n  ['CreateEnumStmt'](node) {\n    const output = [];\n    output.push('CREATE TYPE');\n    output.push(this.list(node.typeName, '.'));\n    output.push('AS ENUM');\n    output.push('(\\n');\n    const vals = node.vals.map(val => {\n      return { String: { str: `'${val.String.str}'` } };\n    });\n    output.push(this.list(vals, ',\\n', '\\t'));\n    output.push('\\n)');\n    return output.join(' ');\n  }\n\n  ['CreateExtensionStmt'](node) {\n    const output = [];\n    output.push('CREATE EXTENSION');\n    if (node.if_not_exists) {\n      output.push('IF NOT EXISTS');\n    }\n    output.push(this.quote(node.extname));\n    if (node.options) {\n      node.options.forEach(opt => {\n        if (\n          opt.DefElem.defname === 'cascade' &&\n          opt.DefElem.arg.Integer.ival === 1\n        ) {\n          output.push('CASCADE');\n        }\n      });\n    }\n    return output.join(' ');\n  }\n\n  ['DropStmt'](node) {\n    const output = [];\n    output.push('DROP');\n    output.push(objtypeName(node.removeType));\n    if (node.missing_ok) {\n      output.push('IF EXISTS');\n    }\n    output.push(this.listQuotes(node.objects));\n    if (node.behavior) {\n      output.push('CASCADE');\n    }\n    return output.join(' ');\n  }\n\n  ['CreatePolicyStmt'](node) {\n    const output = [];\n    output.push('CREATE POLICY');\n\n    output.push(this.quote(node.policy_name));\n    if (node.table) {\n      output.push('ON');\n      output.push(this.deparse(node.table));\n    }\n    if (node.cmd_name) {\n      output.push('FOR');\n      output.push(node.cmd_name.toUpperCase());\n    }\n    output.push('TO');\n    output.push(this.list(node.roles));\n\n    if (node.with_check) {\n      output.push('WITH CHECK');\n      output.push('(');\n      output.push(this.deparse(node.with_check));\n      output.push(')');\n    } else {\n      output.push('USING');\n      output.push('(');\n      output.push(this.deparse(node.qual));\n      output.push(')');\n    }\n\n    return output.join(' ');\n  }\n\n  ['ViewStmt'](node) {\n    const output = [];\n    output.push('CREATE VIEW');\n    output.push(this.deparse(node.view));\n    output.push('AS');\n    output.push(this.deparse(node.query));\n    return output.join(' ');\n  }\n\n  ['CreateTableAsStmt'](node) {\n    const output = [];\n    output.push('CREATE MATERIALIZED VIEW');\n    output.push(this.deparse(node.into));\n    output.push('AS');\n    output.push(this.deparse(node.query));\n    return output.join(' ');\n  }\n\n  ['CreateTrigStmt'](node) {\n    const output = [];\n\n    output.push('CREATE');\n    if (node.isconstraint) {\n      output.push('CONSTRAINT');\n    }\n    output.push('TRIGGER');\n    output.push(this.quote(node.trigname));\n    output.push('\\n');\n\n    // int16 timing;  BEFORE, AFTER, or INSTEAD\n\n    if (node.timing === 64) {\n      output.push('INSTEAD OF');\n    } else if (node.timing === 2) {\n      output.push('BEFORE');\n    } else {\n      output.push('AFTER');\n    }\n\n    // int16 events;  \"OR\" of INSERT/UPDATE/DELETE/TRUNCATE\n\n    //  4 = 0b000100 (insert)\n    //  8 = 0b001000 (delete)\n    // 16 = 0b010000 (update)\n    // 32 = 0b100000 (TRUNCATE)\n\n    const TRIGGER_EVENTS = {\n      INSERT: 4,\n      DELETE: 8,\n      UPDATE: 16,\n      TRUNCATE: 32\n    };\n\n    const events = [];\n    if ((TRIGGER_EVENTS.INSERT & node.events) === TRIGGER_EVENTS.INSERT) {\n      events.push('INSERT');\n    }\n    if ((TRIGGER_EVENTS.UPDATE & node.events) === TRIGGER_EVENTS.UPDATE) {\n      events.push('UPDATE');\n    }\n    if ((TRIGGER_EVENTS.DELETE & node.events) === TRIGGER_EVENTS.DELETE) {\n      events.push('DELETE');\n    }\n    if ((TRIGGER_EVENTS.TRUNCATE & node.events) === TRIGGER_EVENTS.TRUNCATE) {\n      events.push('TRUNCATE');\n    }\n\n    // events\n    output.push(events.join(' OR '));\n\n    // columns\n    if (node.columns) {\n      output.push('OF');\n      output.push(this.list(node.columns));\n    }\n\n    // ON\n    output.push('ON');\n    output.push(this.deparse(node.relation));\n    output.push('\\n');\n\n    if (node.transitionRels) {\n      output.push('REFERENCING');\n      node.transitionRels.forEach(({ TriggerTransition }) => {\n        if (\n          TriggerTransition.isNew === true &&\n          TriggerTransition.isTable === true\n        ) {\n          output.push(`NEW TABLE AS ${TriggerTransition.name}`);\n        } else if (\n          TriggerTransition.isNew !== true &&\n          TriggerTransition.isTable === true\n        ) {\n          output.push(`OLD TABLE AS ${TriggerTransition.name}`);\n        }\n      });\n    }\n\n    // opts\n    if (node.deferrable || node.initdeferred) {\n      if (node.deferrable) {\n        output.push('DEFERRABLE');\n      }\n      if (node.deferrable) {\n        output.push('INITIALLY DEFERRED');\n      }\n      output.push('\\n');\n    }\n\n    if (node.row) {\n      output.push('FOR EACH ROW\\n');\n    } else {\n      output.push('FOR EACH STATEMENT\\n');\n    }\n\n    if (node.whenClause) {\n      output.push('WHEN');\n      output.push('(');\n      output.push(this.deparse(node.whenClause, 'trigger'));\n      output.push(')');\n      output.push('\\n');\n    }\n\n    output.push('EXECUTE PROCEDURE');\n    output.push(\n      this.listQuotes(node.funcname)\n        .split(',')\n        .join('.')\n    );\n    output.push('(');\n    let args = [];\n    if (node.args) {\n      args = node.args;\n    }\n    // seems that it's only parsing strings?\n    args = args\n      .map(arg => {\n        if (dotty.exists(arg, 'String.str')) {\n          return `'${dotty.get(arg, 'String.str')}'`;\n        }\n        return this.deparse(arg);\n      })\n      .filter(a => a);\n    output.push(args.join(','));\n    output.push(')');\n\n    return output.join(' ');\n  }\n\n  ['CreateDomainStmt'](node) {\n    const output = [];\n    output.push('CREATE DOMAIN');\n    output.push(this.list(node.domainname, '.'));\n    output.push('AS');\n    output.push(this.deparse(node.typeName));\n    if (node.constraints) {\n      output.push(this.list(node.constraints));\n    }\n    return output.join(' ');\n  }\n\n  ['CreateStmt'](node) {\n    const output = [];\n    const relpersistence = dotty.get(node, 'relation.RangeVar.relpersistence');\n    if (relpersistence === 't') {\n      output.push('CREATE');\n    } else {\n      output.push('CREATE TABLE');\n    }\n\n    output.push(this.deparse(node.relation));\n    output.push('(\\n');\n    output.push(this.list(node.tableElts, ',\\n', '\\t'));\n    output.push('\\n)');\n\n    if (relpersistence === 'p' && node.hasOwnProperty('inhRelations')) {\n      output.push('INHERITS');\n      output.push('(');\n      output.push(this.list(node.inhRelations));\n      output.push(')');\n    }\n\n    if (node.options) {\n      node.options.forEach(opt => {\n        if (dotty.get(opt, 'DefElem.defname') === 'oids') {\n          if (Number(dotty.get(opt, 'DefElem.arg.Integer.ival')) === 1) {\n            output.push('WITH OIDS');\n          } else {\n            output.push('WITHOUT OIDS');\n          }\n        }\n      });\n    }\n    return output.join(' ');\n  }\n\n  ['ConstraintStmt'](node) {\n    const output = [];\n    const constraint = getConstraintFromConstrType(node.contype);\n    if (node.conname) {\n      output.push('CONSTRAINT');\n      output.push(node.conname);\n      if (!node.pktable) {\n        output.push(constraint);\n      }\n    } else {\n      output.push(constraint);\n    }\n    return output.join(' ');\n  }\n\n  ['ReferenceConstraint'](node) {\n    const output = [];\n    if (node.pk_attrs && node.fk_attrs) {\n      if (node.conname) {\n        output.push('CONSTRAINT');\n        output.push(node.conname);\n      }\n      output.push('FOREIGN KEY');\n      output.push('(');\n      output.push(this.listQuotes(node.fk_attrs));\n      output.push(')');\n      output.push('REFERENCES');\n      output.push(this.deparse(node.pktable));\n      output.push('(');\n      output.push(this.listQuotes(node.pk_attrs));\n      output.push(')');\n    } else if (node.pk_attrs) {\n      output.push(this.ConstraintStmt(node));\n      output.push(this.deparse(node.pktable));\n      output.push('(');\n      output.push(this.listQuotes(node.pk_attrs));\n      output.push(')');\n    } else if (node.fk_attrs) {\n      if (node.conname) {\n        output.push('CONSTRAINT');\n        output.push(node.conname);\n      }\n      output.push('FOREIGN KEY');\n      output.push('(');\n      output.push(this.listQuotes(node.fk_attrs));\n      output.push(')');\n      output.push('REFERENCES');\n      output.push(this.deparse(node.pktable));\n    } else {\n      output.push(this.ConstraintStmt(node));\n      output.push(this.deparse(node.pktable));\n    }\n    return output.join(' ');\n  }\n\n  ['ExclusionConstraint'](node) {\n    const output = [];\n    function getExclusionGroup(nde) {\n      const out = [];\n      const a = nde.exclusions.map(excl => {\n        if (excl[0].IndexElem.name) {\n          return excl[0].IndexElem.name;\n        }\n        return excl[0].IndexElem.expr\n          ? this.deparse(excl[0].IndexElem.expr)\n          : null;\n      });\n\n      const b = nde.exclusions.map(excl => this.deparse(excl[1][0]));\n\n      for (let i = 0; i < a.length; i++) {\n        out.push(`${a[i]} WITH ${b[i]}`);\n        if (i !== a.length - 1) {\n          out.push(',');\n        }\n      }\n\n      return out.join(' ');\n    }\n\n    if (node.exclusions && node.access_method) {\n      output.push('USING');\n      output.push(node.access_method);\n      output.push('(');\n      output.push(getExclusionGroup.call(this, node));\n      output.push(')');\n    }\n\n    return output.join(' ');\n  }\n\n  ['Constraint'](node) {\n    const output = [];\n\n    if (node.contype === CONSTRAINT_TYPES.CONSTR_FOREIGN) {\n      output.push(this.ReferenceConstraint(node));\n    } else {\n      output.push(this.ConstraintStmt(node));\n    }\n\n    if (node.keys) {\n      output.push('(');\n      output.push(this.listQuotes(node.keys));\n      output.push(')');\n    }\n\n    if (node.raw_expr) {\n      output.push('(');\n      output.push(this.deparse(node.raw_expr));\n      output.push(')');\n    }\n\n    if (node.fk_del_action) {\n      switch (node.fk_del_action) {\n        case 'r':\n          output.push('ON DELETE RESTRICT');\n          break;\n        case 'c':\n          output.push('ON DELETE CASCADE');\n          break;\n        case 'n':\n          output.push('ON DELETE SET NULL');\n          break;\n        case 'd':\n          output.push('ON DELETE SET DEFAULT');\n          break;\n        case 'a':\n          // output.push('ON DELETE NO ACTION');\n          break;\n        default:\n      }\n    }\n\n    if (node.fk_upd_action) {\n      switch (node.fk_upd_action) {\n        case 'r':\n          output.push('ON UPDATE RESTRICT');\n          break;\n        case 'c':\n          output.push('ON UPDATE CASCADE');\n          break;\n        case 'n':\n          output.push('ON UPDATE SET NULL');\n          break;\n        case 'd':\n          output.push('ON UPDATE SET DEFAULT');\n          break;\n        case 'a':\n          // output.push('ON UPDATE NO ACTION');\n          break;\n        default:\n      }\n    }\n\n    if (node.fk_matchtype === 'f') {\n      output.push('MATCH FULL');\n    }\n\n    if (node.is_no_inherit === true) {\n      output.push('NO INHERIT');\n    }\n\n    if (node.skip_validation === true) {\n      output.push('NOT VALID');\n    }\n\n    if (node.contype === CONSTRAINT_TYPES.CONSTR_EXCLUSION) {\n      output.push(this.ExclusionConstraint(node));\n    }\n\n    if (node.deferrable) {\n      output.push('deferrable');\n    }\n\n    return output.join(' ');\n  }\n\n  ['AccessPriv'](node) {\n    const output = [];\n    if (node.priv_name) {\n      output.push(node.priv_name.toUpperCase());\n    } else {\n      output.push('ALL');\n    }\n    if (node.cols) {\n      output.push('(');\n      output.push(this.list(node.cols));\n      output.push(')');\n    }\n    return output.join(' ');\n  }\n\n  ['VariableSetStmt'](node) {\n    switch (node.kind) {\n      case VARIABLESET_TYPES.VAR_SET_VALUE:\n        return format(\n          'SET %s%s = %s',\n          node.is_local ? 'LOCAL ' : '',\n          node.name,\n          this.deparseNodes(node.args, 'simple').join(', ')\n        );\n      case VARIABLESET_TYPES.VAR_SET_DEFAULT:\n        return format('SET %s TO DEFAULT', node.name);\n      case VARIABLESET_TYPES.VAR_SET_CURRENT:\n        return format('SET %s FROM CURRENT', node.name);\n      case VARIABLESET_TYPES.VAR_SET_MULTI: {\n        const name = {\n          TRANSACTION: 'TRANSACTION',\n          'SESSION CHARACTERISTICS': 'SESSION CHARACTERISTICS AS TRANSACTION'\n        }[node.name];\n\n        return format(\n          'SET %s %s',\n          name,\n          this.deparseNodes(node.args, 'simple').join(', ')\n        );\n      }\n      case VARIABLESET_TYPES.VAR_RESET:\n        return format('RESET %s', node.name);\n      case VARIABLESET_TYPES.VAR_RESET_ALL:\n        return 'RESET ALL';\n      default:\n        return fail('VariableSetKind', node);\n    }\n  }\n\n  ['VariableShowStmt'](node) {\n    return format('SHOW %s', node.name);\n  }\n\n  ['FuncWithArgs'](node) {\n    const output = [];\n    output.push(this.deparse(node.funcname[0]));\n    output.push('(');\n    output.push(this.list(node.funcargs));\n    output.push(')');\n    return output.join(' ');\n  }\n\n  ['FunctionParameter'](node) {\n    const output = [];\n\n    if (node.mode === 118) {\n      output.push('VARIADIC');\n    }\n\n    if (node.mode === 111) {\n      output.push('OUT');\n    }\n\n    if (node.mode === 98) {\n      output.push('INOUT');\n    }\n\n    output.push(node.name);\n    output.push(this.deparse(node.argType));\n\n    if (node.defexpr) {\n      output.push('DEFAULT');\n      output.push(this.deparse(node.defexpr));\n    }\n\n    return output.join(' ');\n  }\n\n  ['CreateFunctionStmt'](node) {\n    const output = [];\n\n    output.push('CREATE');\n    if (node.replace) {\n      output.push('OR REPLACE');\n    }\n    output.push('FUNCTION');\n\n    output.push(node.funcname.map(name => this.deparse(name)).join('.'));\n    output.push('(');\n    let parameters = [];\n    if (node.parameters) {\n      parameters = [ ...node.parameters ];\n    }\n    const parametersList = parameters.filter(\n      ({ FunctionParameter }) =>\n        FunctionParameter.mode === 118 ||\n        FunctionParameter.mode === 111 ||\n        FunctionParameter.mode === 98 ||\n        FunctionParameter.mode === 105\n    );\n    output.push(this.list(parametersList));\n    output.push(')');\n\n    const returns = parameters.filter(\n      ({ FunctionParameter }) => FunctionParameter.mode === 116\n    );\n\n    // const outs = parameters.filter(\n    //   ({ FunctionParameter }) => FunctionParameter.mode === 111\n    // );\n\n    // var setof = node.parameters.filter(\n    //   ({ FunctionParameter }) => FunctionParameter.mode === 109\n    // );\n\n    if (returns.length > 0) {\n      output.push('RETURNS');\n      output.push('TABLE');\n      output.push('(');\n      output.push(this.list(returns));\n      output.push(')');\n    } else if (node.returnType) {\n      output.push('RETURNS');\n      output.push(this.deparse(node.returnType));\n    }\n\n    node.options.forEach((option, i) => {\n      if (option && option.DefElem) {\n        let value = '';\n        switch (option.DefElem.defname) {\n          case 'as':\n            value = this.deparse(option.DefElem.arg[0]);\n            output.push(`AS $EOFCODE$${value}$EOFCODE$`);\n            break;\n\n          case 'language':\n            value = this.deparse(option.DefElem.arg);\n            output.push('LANGUAGE');\n            output.push(value);\n            break;\n\n          case 'security':\n            output.push('SECURITY');\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('DEFINER');\n            } else {\n              output.push('INVOKER');\n            }\n            break;\n\n          case 'leakproof':\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('LEAKPROOF');\n            }\n            break;\n\n          case 'window':\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('WINDOW');\n            }\n            break;\n\n          case 'strict':\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('STRICT');\n            } else {\n              output.push('CALLED ON NULL INPUT');\n            }\n            break;\n\n          case 'set':\n            if (\n              dotty.get(option, 'DefElem.arg.VariableSetStmt.kind') === 2 &&\n              dotty.get(option, 'DefElem.arg.VariableSetStmt.name') ===\n              'search_path'\n            ) {\n              output.push('SET search_path FROM CURRENT');\n            } else {\n              output.push(this.deparse(option));\n            }\n            break;\n\n          case 'volatility':\n            value = this.deparse(option.DefElem.arg);\n            output.push(value.toUpperCase());\n            break;\n\n          default:\n        }\n      }\n    });\n    return output.join(' ');\n  }\n  ['CreateSchemaStmt'](node) {\n    const output = [];\n\n    output.push('CREATE');\n    if (node.replace) {\n      output.push('OR REPLACE');\n    }\n\n    output.push('SCHEMA');\n\n    if (node.if_not_exists) {\n      output.push('IF NOT EXISTS');\n    }\n\n    output.push(node.schemaname);\n    return output.join(' ');\n  }\n\n  ['RoleSpec'](node) {\n    switch (node.roletype) {\n      case ROLESPEC_TYPES.ROLESPEC_CSTRING:\n        return this.quote(node.rolename);\n      case ROLESPEC_TYPES.ROLESPEC_CURRENT_USER:\n        return 'CURRENT_USER';\n      case ROLESPEC_TYPES.ROLESPEC_SESSION_USER:\n        return 'SESSION_USER';\n      case ROLESPEC_TYPES.ROLESPEC_PUBLIC:\n        return 'PUBLIC';\n      default:\n        return fail('RoleSpec', node);\n    }\n  }\n\n  ['GrantStmt'](node) {\n    const output = [];\n\n    const getTypeFromNode = nodeObj => {\n      switch (nodeObj.objtype) {\n        case GRANTOBJECT_TYPES.ACL_OBJECT_RELATION:\n          if (nodeObj.targtype === GRANTTARGET_TYPES.ACL_TARGET_ALL_IN_SCHEMA) {\n            return 'ALL TABLES IN SCHEMA';\n          }\n          if (nodeObj.targtype === GRANTTARGET_TYPES.ACL_TARGET_DEFAULTS) {\n            return 'TABLES';\n          }\n          // todo could be view\n          return 'TABLE';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_SEQUENCE:\n          return 'SEQUENCE';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_DATABASE:\n          return 'DATABASE';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_DOMAIN:\n          return 'DOMAIN';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_FDW:\n          return 'FOREIGN DATA WRAPPER';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_FOREIGN_SERVER:\n          return 'FOREIGN SERVER';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_FUNCTION:\n          if (nodeObj.targtype === GRANTTARGET_TYPES.ACL_TARGET_ALL_IN_SCHEMA) {\n            return 'ALL FUNCTIONS IN SCHEMA';\n          }\n          if (nodeObj.targtype === GRANTTARGET_TYPES.ACL_TARGET_DEFAULTS) {\n            return 'FUNCTIONS';\n          }\n          return 'FUNCTION';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_LANGUAGE:\n          return 'LANGUAGE';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_LARGEOBJECT:\n          return 'LARGE OBJECT';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_NAMESPACE:\n          return 'SCHEMA';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_TABLESPACE:\n          return 'TABLESPACE';\n        case GRANTOBJECT_TYPES.ACL_OBJECT_TYPE:\n          return 'TYPE';\n        default:\n      }\n      return fail('GrantStmt', node);\n    };\n\n    if (node.objtype !== GRANTOBJECT_TYPES.ACL_OBJECT_COLUMN) {\n      if (!node.is_grant) {\n        output.push('REVOKE');\n        if (node.grant_option) {\n          output.push('GRANT OPTION');\n          output.push('FOR');\n        }\n        if (node.privileges) {\n          output.push(this.list(node.privileges));\n        } else {\n          output.push('ALL');\n        }\n        output.push('ON');\n        output.push(getTypeFromNode(node));\n        output.push(this.list(node.objects));\n        output.push('FROM');\n        output.push(this.list(node.grantees));\n      } else {\n        output.push('GRANT');\n        if (node.privileges) {\n          output.push(this.list(node.privileges));\n        } else {\n          output.push('ALL');\n        }\n        output.push('ON');\n        output.push(getTypeFromNode(node));\n        output.push(this.list(node.objects));\n        output.push('TO');\n        output.push(this.list(node.grantees));\n        if (node.grant_option) {\n          output.push('WITH GRANT OPTION');\n        }\n      }\n      if (Number(node.behavior) === 1) {\n        output.push('CASCADE');\n      }\n    }\n\n    return output.join(' ');\n  }\n\n  ['GrantRoleStmt'](node) {\n    const output = [];\n\n    if (!node.is_grant) {\n      output.push('REVOKE');\n      output.push(this.list(node.granted_roles));\n      output.push('FROM');\n      output.push(this.list(node.grantee_roles));\n    } else {\n      output.push('GRANT');\n      output.push(this.list(node.granted_roles));\n      output.push('TO');\n      output.push(this.list(node.grantee_roles));\n    }\n    if (node.admin_opt) {\n      output.push('WITH ADMIN OPTION');\n    }\n\n    return output.join(' ');\n  }\n\n  ['CreateRoleStmt'](node) {\n    const output = [];\n\n    const roleOption = (nodeObj, i, val1, val2) => {\n      const val = Number(\n        dotty.get(nodeObj, `options.${i}.DefElem.arg.Integer.ival`)\n      );\n      if (val > 0) {\n        output.push(val1);\n      } else {\n        output.push(val2);\n      }\n    };\n\n    output.push('CREATE');\n    switch (node.stmt_type) {\n      case ROLESTMT_TYPES.ROLESTMT_USER:\n        output.push('USER');\n        break;\n      case ROLESTMT_TYPES.ROLESTMT_GROUP:\n        output.push('GROUP');\n        break;\n      default:\n        output.push('ROLE');\n    }\n\n    output.push(`\"${node.role}\"`);\n\n    if (node.options) {\n      const opts = dotty.search(node, 'options.*.DefElem.defname');\n\n      if (opts.length === 1 && opts[0] === 'addroleto') {\n        // only one case\n      } else {\n        output.push('WITH');\n      }\n\n      opts.forEach((option, i) => {\n        let value = '';\n        switch (option) {\n          case 'canlogin':\n            roleOption(node, i, 'LOGIN', 'NOLOGIN');\n            break;\n          case 'addroleto':\n            output.push('IN ROLE');\n            output.push(\n              dotty\n                .search(node, `options.${i}.DefElem.arg.*.RoleSpec.rolename`)\n                .join(',')\n            );\n            break;\n          case 'password':\n            output.push('PASSWORD');\n            value = dotty.get(\n              node,\n              `options.${i}.DefElem.arg.A_Const.val.String.str`\n            );\n            output.push(`'${value}'`);\n            break;\n          case 'adminmembers':\n            output.push('ADMIN');\n            output.push(this.list(node.options[i].DefElem.arg));\n            break;\n          case 'rolemembers':\n            output.push('USER');\n            output.push(this.list(node.options[i].DefElem.arg));\n            break;\n          case 'createdb':\n            roleOption(node, i, 'CREATEDB', 'NOCREATEDB');\n            break;\n          case 'isreplication':\n            roleOption(node, i, 'REPLICATION', 'NOREPLICATION');\n            break;\n          case 'bypassrls':\n            roleOption(node, i, 'BYPASSRLS', 'NOBYPASSRLS');\n            break;\n          case 'inherit':\n            roleOption(node, i, 'INHERIT', 'NOINHERIT');\n            break;\n          case 'superuser':\n            roleOption(node, i, 'SUPERUSER', 'NOSUPERUSER');\n            break;\n          case 'createrole':\n            roleOption(node, i, 'CREATEROLE', 'NOCREATEROLE');\n            break;\n          case 'validUntil':\n            output.push('VALID UNTIL');\n            value = dotty.get(node, `options.${i}.DefElem.arg.String.str`);\n            output.push(`'${value}'`);\n            break;\n          default:\n        }\n      });\n    }\n    return output.join(' ');\n  }\n\n  ['TransactionStmt'](node) {\n    const output = [];\n\n    const begin = nodeOpts => {\n      const opts = dotty.search(nodeOpts, 'options.*.DefElem.defname');\n      if (opts.includes('transaction_read_only')) {\n        const index = opts.indexOf('transaction_read_only');\n        const obj = nodeOpts.options[index];\n        let set = false;\n        const flag = Number(this.deparse(dotty.get(obj, 'DefElem.arg')));\n        if (flag > 0) {\n          set = true;\n        }\n        if (set) {\n          return 'BEGIN TRANSACTION READ ONLY';\n        }\n        return 'BEGIN TRANSACTION READ WRITE';\n      }\n      if (opts.includes('transaction_isolation')) {\n        const index = opts.indexOf('transaction_isolation');\n        const obj = nodeOpts.options[index];\n        const lopts = this.deparse(dotty.get(obj, 'DefElem.arg')).replace(\n          /['\"]+/g,\n          ''\n        );\n        return `BEGIN TRANSACTION ISOLATION LEVEL ${lopts.toUpperCase()}`;\n      }\n      return 'BEGIN';\n    };\n\n    const start = nodeOpts => {\n      const opts = dotty.search(nodeOpts, 'options.*.DefElem.defname');\n      if (opts.includes('transaction_read_only')) {\n        const index = opts.indexOf('transaction_read_only');\n        const obj = nodeOpts.options[index];\n        let set = false;\n        const flag = Number(this.deparse(dotty.get(obj, 'DefElem.arg')));\n        if (flag > 0) {\n          set = true;\n        }\n        if (set) {\n          return 'START TRANSACTION READ ONLY';\n        }\n        return 'START TRANSACTION READ WRITE';\n      }\n\n      return 'START TRANSACTION';\n    };\n\n    switch (node.kind) {\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_BEGIN:\n        return begin(node);\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_START:\n        return start(node);\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_COMMIT:\n        return 'COMMIT';\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_ROLLBACK:\n        return 'ROLLBACK';\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_SAVEPOINT:\n        output.push('SAVEPOINT');\n        output.push(this.deparse(node.options[0].DefElem.arg));\n        break;\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_RELEASE:\n        output.push('RELEASE SAVEPOINT');\n        output.push(this.deparse(node.options[0].DefElem.arg));\n        break;\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_ROLLBACK_TO:\n        output.push('ROLLBACK TO');\n        output.push(this.deparse(node.options[0].DefElem.arg));\n        break;\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_PREPARE:\n        output.push('PREPARE TRANSACTION');\n        output.push(`'${node.gid}'`);\n        break;\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_COMMIT_PREPARED:\n        output.push('COMMIT PREPARED');\n        output.push(`'${node.gid}'`);\n        break;\n      case TRANSACTIONSTMT_TYPES.TRANS_STMT_ROLLBACK_PREPARED:\n        output.push('ROLLBACK PREPARED');\n        output.push(`'${node.gid}'`);\n        break;\n      default:\n    }\n    return output.join(' ');\n  }\n\n  ['SortBy'](node) {\n    const output = [];\n\n    output.push(this.deparse(node.node));\n\n    switch (node.sortby_dir) {\n      case SORTBYDIR_TYPES.SORTBY_ASC:\n        output.push('ASC');\n        break;\n      case SORTBYDIR_TYPES.SORTBY_DESC:\n        output.push('DESC');\n        break;\n      case SORTBYDIR_TYPES.SORTBY_USING:\n        output.push(`USING ${this.deparseNodes(node.useOp)}`);\n        break;\n      case SORTBYDIR_TYPES.SORTBY_DEFAULT:\n        break;\n      default:\n        return fail('SortBy', node);\n    }\n\n    if (node.sortby_nulls === SORTBYNULLS_TYPES.SORTBY_NULLS_FIRST) {\n      output.push('NULLS FIRST');\n    }\n\n    if (node.sortby_nulls === SORTBYNULLS_TYPES.SORTBY_NULLS_LAST) {\n      output.push('NULLS LAST');\n    }\n\n    return output.join(' ');\n  }\n\n  ['ObjectWithArgs'](node, context) {\n    const output = [];\n\n    if (context === 'noquotes') {\n      output.push(this.list(node.objname));\n    } else {\n      output.push(this.listQuotes(node.objname, '.'));\n    }\n    if (node.objargs && node.objargs.length) {\n      output.push('(');\n      output.push(\n        node.objargs\n          .map(arg => {\n            if (arg === null) {\n              return 'NONE';\n            }\n            return this.deparse(arg);\n          })\n          .join(',')\n      );\n      output.push(')');\n    }\n\n    return output.join(' ');\n  }\n\n  ['String'](node) {\n    return node.str;\n  }\n\n  ['SubLink'](node) {\n    switch (true) {\n      case node.subLinkType === 0:\n        return format('EXISTS (%s)', this.deparse(node.subselect));\n      case node.subLinkType === 1:\n        return format(\n          '%s %s ALL (%s)',\n          this.deparse(node.testexpr),\n          this.deparse(node.operName[0]),\n          this.deparse(node.subselect)\n        );\n      case node.subLinkType === 2 && !(node.operName != null):\n        return format(\n          '%s IN (%s)',\n          this.deparse(node.testexpr),\n          this.deparse(node.subselect)\n        );\n      case node.subLinkType === 2:\n        return format(\n          '%s %s ANY (%s)',\n          this.deparse(node.testexpr),\n          this.deparse(node.operName[0]),\n          this.deparse(node.subselect)\n        );\n      case node.subLinkType === 3:\n        return format(\n          '%s %s (%s)',\n          this.deparse(node.testexpr),\n          this.deparse(node.operName[0]),\n          this.deparse(node.subselect)\n        );\n      case node.subLinkType === 4:\n        return format('(%s)', this.deparse(node.subselect));\n      case node.subLinkType === 5:\n        // TODO(zhm) what is this?\n        return fail('SubLink', node);\n      // MULTIEXPR_SUBLINK\n      // format('(%s)', @deparse(node.subselect))\n      case node.subLinkType === 6:\n        return format('ARRAY (%s)', this.deparse(node.subselect));\n      default:\n        return fail('SubLink', node);\n    }\n  }\n\n  ['TypeCast'](node) {\n    const type = this.deparse(node.typeName);\n    if (\n      type === 'boolean' &&\n      dotty.exists(node, 'arg.A_Const.val.String.str')\n    ) {\n      const value = dotty.get(node, 'arg.A_Const.val.String.str');\n      if (value === 'f') {\n        return '(FALSE)';\n      }\n      if (value === 't') {\n        return '(TRUE)';\n      }\n    }\n    return this.deparse(node.arg) + '::' + this.deparse(node.typeName);\n  }\n\n  ['TypeName'](node) {\n    if (_.last(node.names).String.str === 'interval') {\n      return this.deparseInterval(node);\n    }\n\n    const output = [];\n\n    if (node.setof) {\n      output.push('SETOF');\n    }\n\n    let args = null;\n\n    if (node.typmods != null) {\n      args = node.typmods.map(item => {\n        return this.deparse(item);\n      });\n    }\n\n    const type = [];\n\n    type.push(this.type(node.names, args && args.join(', ')));\n\n    if (node.arrayBounds != null) {\n      type.push('[]');\n    }\n\n    output.push(type.join(''));\n\n    return output.join(' ');\n  }\n\n  ['CaseWhen'](node) {\n    const output = [ 'WHEN' ];\n\n    output.push(this.deparse(node.expr));\n    output.push('THEN');\n    output.push(this.deparse(node.result));\n\n    return output.join(' ');\n  }\n\n  ['WindowDef'](node, context) {\n    const output = [];\n\n    if (context !== 'window') {\n      if (node.name) {\n        output.push(node.name);\n      }\n    }\n\n    const empty =\n      !(node.partitionClause != null) && !(node.orderClause != null);\n\n    const frameOptions = this.deparseFrameOptions(\n      node.frameOptions,\n      node.refname,\n      node.startOffset,\n      node.endOffset\n    );\n\n    if (\n      empty &&\n      context !== 'window' &&\n      !(node.name != null) &&\n      frameOptions.length === 0\n    ) {\n      return '()';\n    }\n\n    const windowParts = [];\n\n    let useParens = false;\n\n    if (node.partitionClause) {\n      const partition = [ 'PARTITION BY' ];\n\n      const clause = node.partitionClause.map(item => this.deparse(item));\n\n      partition.push(clause.join(', '));\n\n      windowParts.push(partition.join(' '));\n      useParens = true;\n    }\n\n    if (node.orderClause) {\n      windowParts.push('ORDER BY');\n\n      const orders = node.orderClause.map(item => {\n        return this.deparse(item);\n      });\n\n      windowParts.push(orders.join(', '));\n\n      useParens = true;\n    }\n\n    if (frameOptions.length) {\n      useParens = true;\n      windowParts.push(frameOptions);\n    }\n\n    if (useParens && context !== 'window') {\n      return output.join(' ') + ' (' + windowParts.join(' ') + ')';\n    }\n\n    return output.join(' ') + windowParts.join(' ');\n  }\n\n  ['WithClause'](node) {\n    const output = [ 'WITH' ];\n\n    if (node.recursive) {\n      output.push('RECURSIVE');\n    }\n\n    output.push(this.list(node.ctes));\n\n    return output.join(' ');\n  }\n\n  deparseFrameOptions(options, refName, startOffset, endOffset) {\n    const FRAMEOPTION_NONDEFAULT = 0x00001; // any specified?\n    const FRAMEOPTION_RANGE = 0x00002; // RANGE behavior\n    const FRAMEOPTION_ROWS = 0x00004; // ROWS behavior\n    const FRAMEOPTION_BETWEEN = 0x00008; // BETWEEN given?\n    const FRAMEOPTION_START_UNBOUNDED_PRECEDING = 0x00010; // start is U. P.\n    const FRAMEOPTION_END_UNBOUNDED_PRECEDING = 0x00020; // (disallowed)\n    const FRAMEOPTION_START_UNBOUNDED_FOLLOWING = 0x00040; // (disallowed)\n    const FRAMEOPTION_END_UNBOUNDED_FOLLOWING = 0x00080; // end is U. F.\n    const FRAMEOPTION_START_CURRENT_ROW = 0x00100; // start is C. R.\n    const FRAMEOPTION_END_CURRENT_ROW = 0x00200; // end is C. R.\n    const FRAMEOPTION_START_VALUE_PRECEDING = 0x00400; // start is V. P.\n    const FRAMEOPTION_END_VALUE_PRECEDING = 0x00800; // end is V. P.\n    const FRAMEOPTION_START_VALUE_FOLLOWING = 0x01000; // start is V. F.\n    const FRAMEOPTION_END_VALUE_FOLLOWING = 0x02000; // end is V. F.\n\n    if (!(options & FRAMEOPTION_NONDEFAULT)) {\n      return '';\n    }\n\n    const output = [];\n\n    if (refName != null) {\n      output.push(refName);\n    }\n\n    if (options & FRAMEOPTION_RANGE) {\n      output.push('RANGE');\n    }\n\n    if (options & FRAMEOPTION_ROWS) {\n      output.push('ROWS');\n    }\n\n    const between = options & FRAMEOPTION_BETWEEN;\n\n    if (between) {\n      output.push('BETWEEN');\n    }\n\n    if (options & FRAMEOPTION_START_UNBOUNDED_PRECEDING) {\n      output.push('UNBOUNDED PRECEDING');\n    }\n\n    if (options & FRAMEOPTION_START_UNBOUNDED_FOLLOWING) {\n      output.push('UNBOUNDED FOLLOWING');\n    }\n\n    if (options & FRAMEOPTION_START_CURRENT_ROW) {\n      output.push('CURRENT ROW');\n    }\n\n    if (options & FRAMEOPTION_START_VALUE_PRECEDING) {\n      output.push(this.deparse(startOffset) + ' PRECEDING');\n    }\n\n    if (options & FRAMEOPTION_START_VALUE_FOLLOWING) {\n      output.push(this.deparse(startOffset) + ' FOLLOWING');\n    }\n\n    if (between) {\n      output.push('AND');\n\n      if (options & FRAMEOPTION_END_UNBOUNDED_PRECEDING) {\n        output.push('UNBOUNDED PRECEDING');\n      }\n\n      if (options & FRAMEOPTION_END_UNBOUNDED_FOLLOWING) {\n        output.push('UNBOUNDED FOLLOWING');\n      }\n\n      if (options & FRAMEOPTION_END_CURRENT_ROW) {\n        output.push('CURRENT ROW');\n      }\n\n      if (options & FRAMEOPTION_END_VALUE_PRECEDING) {\n        output.push(this.deparse(endOffset) + ' PRECEDING');\n      }\n\n      if (options & FRAMEOPTION_END_VALUE_FOLLOWING) {\n        output.push(this.deparse(endOffset) + ' FOLLOWING');\n      }\n    }\n\n    return output.join(' ');\n  }\n\n  deparseInterval(node) {\n    const type = [ 'interval' ];\n\n    if (node.arrayBounds != null) {\n      type.push('[]');\n    }\n\n    if (node.typmods) {\n      const typmods = node.typmods.map(item => this.deparse(item));\n\n      let intervals = this.interval(typmods[0]);\n\n      // SELECT interval(0) '1 day 01:23:45.6789'\n      if (\n        node.typmods[0] &&\n        node.typmods[0].A_Const &&\n        node.typmods[0].A_Const.val.Integer.ival === 32767 &&\n        node.typmods[1] &&\n        node.typmods[1].A_Const != null\n      ) {\n        intervals = [ `(${node.typmods[1].A_Const.val.Integer.ival})` ];\n      } else {\n        intervals = intervals.map(part => {\n          if (part === 'second' && typmods.length === 2) {\n            return 'second(' + _.last(typmods) + ')';\n          }\n\n          return part;\n        });\n      }\n\n      type.push(intervals.join(' to '));\n    }\n\n    return type.join(' ');\n  }\n\n  interval(mask) {\n    // ported from https://github.com/lfittl/pg_query/blob/master/lib/pg_query/deparse/interval.rb\n    if (this.MASKS == null) {\n      this.MASKS = {\n        0: 'RESERV',\n        1: 'MONTH',\n        2: 'YEAR',\n        3: 'DAY',\n        4: 'JULIAN',\n        5: 'TZ',\n        6: 'DTZ',\n        7: 'DYNTZ',\n        8: 'IGNORE_DTF',\n        9: 'AMPM',\n        10: 'HOUR',\n        11: 'MINUTE',\n        12: 'SECOND',\n        13: 'MILLISECOND',\n        14: 'MICROSECOND',\n        15: 'DOY',\n        16: 'DOW',\n        17: 'UNITS',\n        18: 'ADBC',\n        19: 'AGO',\n        20: 'ABS_BEFORE',\n        21: 'ABS_AFTER',\n        22: 'ISODATE',\n        23: 'ISOTIME',\n        24: 'WEEK',\n        25: 'DECADE',\n        26: 'CENTURY',\n        27: 'MILLENNIUM',\n        28: 'DTZMOD'\n      };\n    }\n\n    if (this.BITS == null) {\n      this.BITS = _.invert(this.MASKS);\n    }\n\n    if (this.INTERVALS == null) {\n      this.INTERVALS = {};\n      this.INTERVALS[1 << this.BITS.YEAR] = [ 'year' ];\n      this.INTERVALS[1 << this.BITS.MONTH] = [ 'month' ];\n      this.INTERVALS[1 << this.BITS.DAY] = [ 'day' ];\n      this.INTERVALS[1 << this.BITS.HOUR] = [ 'hour' ];\n      this.INTERVALS[1 << this.BITS.MINUTE] = [ 'minute' ];\n      this.INTERVALS[1 << this.BITS.SECOND] = [ 'second' ];\n      this.INTERVALS[(1 << this.BITS.YEAR) | (1 << this.BITS.MONTH)] = [\n        'year',\n        'month'\n      ];\n      this.INTERVALS[(1 << this.BITS.DAY) | (1 << this.BITS.HOUR)] = [\n        'day',\n        'hour'\n      ];\n      this.INTERVALS[\n        (1 << this.BITS.DAY) | (1 << this.BITS.HOUR) | (1 << this.BITS.MINUTE)\n      ] = [ 'day', 'minute' ];\n      this.INTERVALS[\n        (1 << this.BITS.DAY) |\n        (1 << this.BITS.HOUR) |\n        (1 << this.BITS.MINUTE) |\n        (1 << this.BITS.SECOND)\n      ] = [ 'day', 'second' ];\n      this.INTERVALS[(1 << this.BITS.HOUR) | (1 << this.BITS.MINUTE)] = [\n        'hour',\n        'minute'\n      ];\n      this.INTERVALS[\n        (1 << this.BITS.HOUR) |\n        (1 << this.BITS.MINUTE) |\n        (1 << this.BITS.SECOND)\n      ] = [ 'hour', 'second' ];\n      this.INTERVALS[(1 << this.BITS.MINUTE) | (1 << this.BITS.SECOND)] = [\n        'minute',\n        'second'\n      ];\n\n      // utils/timestamp.h\n      // #define INTERVAL_FULL_RANGE (0x7FFF)\n      this.INTERVALS[(this.INTERVAL_FULL_RANGE = '32767')] = [];\n    }\n\n    return this.INTERVALS[mask.toString()];\n  }\n}\n"]}