{"version":3,"sources":["../src/deparser.js"],"names":["dotty","require","CONSTRAINT_TYPES","POSTGRES_TYPES","keys","_","compact","o","filter","p","toString","length","fail","type","node","Error","JSON","stringify","parens","string","indent","text","count","Deparser","deparse","query","deparseQuery","constructor","tree","map","join","deparseNodes","nodes","context","isArray","list","separator","listQuotes","split","a","quote","trim","value","escape","literal","replace","convertTypeName","typeName","size","names","args","name","catalog","mods","String","str","res","item","isNumber","values","output","kind","lexpr","push","schema","operator","rexpr","op","FuncCall","Null","aliasname","colnames","elements","val","lidx","uidx","arg","i","indirection","subnode","A_Star","prefix","substring","boolop","tests","booltesttype","defresult","collname","colname","raw_default","constraints","collClause","get","KEYWORDS","fields","field","includes","toLowerCase","toUpperCase","objtype","objname","objargs","comment","ctename","aliascolnames","ctequery","defname","A_Const","Integer","ival","defnamespace","params","agg_star","funcname","order","withinGroup","agg_within_group","agg_order","call","agg_distinct","func_variadic","agg_filter","over","content","rel","larg","isNatural","jointype","quals","usingClause","rarg","JoinExpr","alias","using","wrapped","strengths","strength","lockedRels","nulltesttype","number","lateral","funcs","functions","funcCall","calls","is_rowsfrom","ordinality","coldeflist","defList","subquery","relation","method","repeatable","inhOpt","relpersistence","schemaname","relname","row_format","withClause","valuesLists","sets","all","distinctClause","clause","e","targetList","intoClause","fromClause","whereClause","lists","v","groupClause","havingClause","windowClause","windows","w","window","WindowDef","sortClause","limitCount","limitOffset","lockingClause","forEach","relkind","missing_ok","cmds","subtype","def","isconstraint","trigname","timing","TRIGGER_EVENTS","INSERT","DELETE","UPDATE","TRUNCATE","events","columns","deferrable","initdeferred","row","whenClause","exists","tableElts","hasOwnProperty","inhRelations","options","opt","Number","constraint","contype","conname","pktable","pk_attrs","fk_attrs","ConstraintStmt","getExclusionGroup","nde","out","exclusions","excl","IndexElem","expr","b","access_method","ReferenceConstraint","raw_expr","fk_del_action","fk_upd_action","fk_matchtype","is_no_inherit","skip_validation","ExclusionConstraint","priv_name","cols","is_local","funcargs","mode","argType","defexpr","parameters","parametersList","FunctionParameter","returns","returnType","option","DefElem","roletype","rolename","getTypeFromNode","nodeObj","targtype","is_grant","grant_option","privileges","objects","grantees","behavior","granted_roles","grantee_roles","admin_opt","roleOption","val1","val2","stmt_type","role","opts","search","begin","nodeOpts","index","indexOf","obj","set","flag","lopts","start","gid","sortby_dir","useOp","sortby_nulls","subLinkType","subselect","testexpr","operName","last","deparseInterval","setof","typmods","arrayBounds","result","empty","partitionClause","orderClause","frameOptions","deparseFrameOptions","refname","startOffset","endOffset","windowParts","useParens","partition","orders","recursive","ctes","refName","FRAMEOPTION_NONDEFAULT","FRAMEOPTION_RANGE","FRAMEOPTION_ROWS","FRAMEOPTION_BETWEEN","FRAMEOPTION_START_UNBOUNDED_PRECEDING","FRAMEOPTION_END_UNBOUNDED_PRECEDING","FRAMEOPTION_START_UNBOUNDED_FOLLOWING","FRAMEOPTION_END_UNBOUNDED_FOLLOWING","FRAMEOPTION_START_CURRENT_ROW","FRAMEOPTION_END_CURRENT_ROW","FRAMEOPTION_START_VALUE_PRECEDING","FRAMEOPTION_END_VALUE_PRECEDING","FRAMEOPTION_START_VALUE_FOLLOWING","FRAMEOPTION_END_VALUE_FOLLOWING","between","intervals","interval","part","mask","MASKS","BITS","invert","INTERVALS","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","INTERVAL_FULL_RANGE"],"mappings":"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","file":"deparser.js","sourcesContent":["import _ from 'lodash';\nimport { format } from 'util';\nconst dotty = require('dotty');\n\nconst CONSTRAINT_TYPES = [\n  'NULL',\n  'NOT NULL',\n  'DEFAULT',\n  'CHECK',\n  'PRIMARY KEY',\n  'UNIQUE',\n  'EXCLUDE',\n  'REFERENCES'\n];\n\nconst POSTGRES_TYPES = [\n  'AGGREGATE',\n  '',\n  '',\n  '',\n  'CAST',\n  'COLUMN',\n  'COLLATION',\n  'CONVERSION',\n  'DATABASE',\n  '',\n  '',\n  'DOMAIN',\n  'CONSTRAINT', // ON DOMAIN\n  '',\n  'EXTENSION',\n  'FOREIGN DATA WRAPPER',\n  'SERVER',\n  'FOREIGN TABLE',\n  'FUNCTION',\n  'INDEX',\n  'LANGUAGE',\n  'LARGE OBJECT',\n  'MATERIALIZED VIEW',\n  'OPERATOR CLASS',\n  'OPERATOR',\n  'OPERATOR FAMILY',\n  'POLICY',\n  'ROLE',\n  'RULE',\n  'SCHEMA',\n  'SEQUENCE',\n  'CONSTRAINT',\n  'TABLE',\n  'TABLESPACE',\n  'TRANSFORM',\n  'TRIGGER',\n  'TEXT SEARCH CONFIGURATION',\n  'TEXT SEARCH DICTIONARY',\n  'TEXT SEARCH PARSER',\n  'TEXT SEARCH TEMPLATE',\n  'TYPE',\n  '',\n  'VIEW',\n  '',\n  '',\n  '',\n  '',\n  ''\n];\n\nconst { keys } = _;\n\nconst compact = o => {\n  return _.filter(_.compact(o), (p) => {\n    if (p == null) {\n      return false;\n    }\n\n    return p.toString().length;\n  });\n};\n\nconst fail = (type, node) => {\n  throw new Error(format('Unhandled %s node: %s', type, JSON.stringify(node)));\n};\n\nconst parens = (string) => {\n  return '(' + string + ')';\n};\n\nconst indent = (text, count = 1) => text;\n\nexport default class Deparser {\n  static deparse(query) {\n    return new Deparser(query).deparseQuery();\n  }\n\n  constructor(tree) {\n    this.tree = tree;\n  }\n\n  deparseQuery() {\n    return (this.tree.map(node => `${this.deparse(node)};`)).join('\\n\\n');\n  }\n\n  deparseNodes(nodes, context) {\n    return nodes.map(node => {\n      return _.isArray(node) ? this.list(node) : this.deparse(node, context);\n    });\n  }\n\n  list(nodes, separator = ', ') {\n    if (!nodes) {\n      return '';\n    }\n\n    return this.deparseNodes(nodes).join(separator);\n  }\n\n  listQuotes(nodes, separator = ', ') {\n    return this.list(nodes, separator).split(separator).map(a => this.quote(a.trim())).join(separator);\n  }\n\n  quote(value) {\n    if (value == null) {\n      return null;\n    }\n\n    if (_.isArray(value)) {\n      return value.map(o => this.quote(o));\n    }\n\n    return '\"' + value + '\"';\n  }\n\n  // SELECT encode(E'''123\\\\000\\\\001', 'base64')\n  escape(literal) {\n    return \"'\" + literal.replace(/'/g, \"''\") + \"'\";\n  }\n\n  convertTypeName(typeName, size) {\n    switch (typeName) {\n      case 'bpchar':\n        if (size != null) {\n          return 'char';\n        }\n        // return `pg_catalog.bpchar` below so that the following is symmetric\n        // SELECT char 'c' = char 'c' AS true\n        return 'pg_catalog.bpchar';\n      case 'varchar':\n        return 'varchar';\n      case 'numeric':\n        return 'numeric';\n      case 'bool':\n        return 'boolean';\n      case 'int2':\n        return 'smallint';\n      case 'int4':\n        return 'int';\n      case 'int8':\n        return 'bigint';\n      case 'real': case 'float4':\n        return 'real';\n      case 'float8':\n        return 'pg_catalog.float8';\n      case 'text':\n        // SELECT EXTRACT(CENTURY FROM CURRENT_DATE)>=21 AS True\n        return 'pg_catalog.text';\n      case 'date':\n        return 'pg_catalog.date';\n      case 'time':\n        return 'time';\n      case 'timetz':\n        return 'pg_catalog.timetz';\n      case 'timestamp':\n        return 'timestamp';\n      case 'timestamptz':\n        return 'pg_catalog.timestamptz';\n      case 'interval':\n        return 'interval';\n      case 'bit':\n        return 'bit';\n      default:\n        throw new Error(format('Unhandled data type: %s', typeName));\n    }\n  }\n\n  type(names, args) {\n    const [ catalog, type ] = names.map(name => this.deparse(name));\n\n    const mods = (name, size) => {\n      if (size != null) {\n        return name + '(' + size + ')';\n      }\n\n      return name;\n    };\n\n    // handle the special \"char\" (in quotes) type\n    if (names[0].String.str === 'char') {\n      names[0].String.str = '\"char\"';\n    }\n\n    if (catalog !== 'pg_catalog') {\n      return mods(this.list(names, '.'), args);\n    }\n\n    const res = this.convertTypeName(type, args);\n\n    return mods(res, args);\n  }\n\n  deparse(item, context) {\n    if (item == null) {\n      return null;\n    }\n\n    if (_.isNumber(item)) {\n      return item;\n    }\n\n    const type = keys(item)[0];\n    const node = _.values(item)[0];\n\n    if (this[type] == null) {\n      throw new Error(type + ' is not implemented');\n    }\n\n    return this[type](node, context);\n  }\n\n  ['A_Expr'](node, context) {\n    const output = [];\n\n    switch (node.kind) {\n      case 0: // AEXPR_OP\n        if (node.lexpr) {\n          output.push(parens(this.deparse(node.lexpr)));\n        }\n\n        if (node.name.length > 1) {\n          const schema = this.deparse(node.name[0]);\n          const operator = this.deparse(node.name[1]);\n          output.push(`OPERATOR(${schema}.${operator})`);\n        } else {\n          output.push(this.deparse(node.name[0], context));\n        }\n\n        if (node.rexpr) {\n          output.push(parens(this.deparse(node.rexpr, context)));\n        }\n\n        if (output.length === 2) {\n          return parens(output.join(''));\n        }\n\n        return parens(output.join(' '));\n\n      case 1: // AEXPR_OP_ANY\n        output.push(this.deparse(node.lexpr));\n        output.push(format('ANY (%s)', this.deparse(node.rexpr, context)));\n        return output.join(` ${this.deparse(node.name[0], context)} `);\n\n      case 2: // AEXPR_OP_ALL\n        output.push(this.deparse(node.lexpr, context));\n        output.push(format('ALL (%s)', this.deparse(node.rexpr, context)));\n        return output.join(` ${this.deparse(node.name[0], context)} `);\n\n      case 3: // AEXPR_DISTINCT\n        return format('%s IS DISTINCT FROM %s', this.deparse(node.lexpr, context), this.deparse(node.rexpr, context));\n\n      case 4: // AEXPR_NULLIF\n        return format('NULLIF(%s, %s)', this.deparse(node.lexpr, context), this.deparse(node.rexpr, context));\n\n      case 5: { // AEXPR_OF\n        const op = node.name[0].String.str === '=' ? 'IS OF' : 'IS NOT OF';\n        return format('%s %s (%s)', this.deparse(node.lexpr, context), op, this.list(node.rexpr, context));\n      }\n\n      case 6: { // AEXPR_IN\n        const operator = node.name[0].String.str === '=' ? 'IN' : 'NOT IN';\n\n        return format('%s %s (%s)', this.deparse(node.lexpr, context), operator, this.list(node.rexpr, context));\n      }\n\n      case 7: // AEXPR_LIKE\n        output.push(this.deparse(node.lexpr, context));\n\n        if (node.name[0].String.str === '!~~') {\n          output.push(format('NOT LIKE (%s)', this.deparse(node.rexpr, context)));\n        } else {\n          output.push(format('LIKE (%s)', this.deparse(node.rexpr, context)));\n        }\n\n        return output.join(' ');\n\n      case 8: // AEXPR_ILIKE\n        output.push(this.deparse(node.lexpr, context));\n\n        if (node.name[0].String.str === '!~~*') {\n          output.push(format('NOT ILIKE (%s)', this.deparse(node.rexpr, context)));\n        } else {\n          output.push(format('ILIKE (%s)', this.deparse(node.rexpr, context)));\n        }\n\n        return output.join(' ');\n\n      case 9: // AEXPR_SIMILAR\n        // SIMILAR TO emits a similar_escape FuncCall node with the first argument\n        output.push(this.deparse(node.lexpr, context));\n\n        if (this.deparse(node.rexpr.FuncCall.args[1].Null, context)) {\n          output.push(format('SIMILAR TO %s', this.deparse(node.rexpr.FuncCall.args[0], context)));\n        } else {\n          output.push(format('SIMILAR TO %s ESCAPE %s',\n                             this.deparse(node.rexpr.FuncCall.args[0], context),\n                             this.deparse(node.rexpr.FuncCall.args[1], context)));\n        }\n\n        return output.join(' ');\n\n      case 10: // AEXPR_BETWEEN TODO(zhm) untested\n        output.push(this.deparse(node.lexpr, context));\n        output.push(format('BETWEEN %s AND %s', this.deparse(node.rexpr[0], context), this.deparse(node.rexpr[1], context)));\n        return output.join(' ');\n\n      case 11: // AEXPR_NOT_BETWEEN TODO(zhm) untested\n        output.push(this.deparse(node.lexpr, context));\n        output.push(format('NOT BETWEEN %s AND %s', this.deparse(node.rexpr[0], context), this.deparse(node.rexpr[1], context)));\n        return output.join(' ');\n\n      default:\n        return fail('A_Expr', node);\n    }\n  }\n\n  ['Alias'](node, context) {\n    const name = node.aliasname;\n\n    const output = [ 'AS' ];\n\n    if (node.colnames) {\n      output.push(name + parens(this.list(node.colnames)));\n    } else {\n      output.push(this.quote(name));\n    }\n\n    return output.join(' ');\n  }\n\n  ['A_ArrayExpr'](node) {\n    return format('ARRAY[%s]', this.list(node.elements));\n  }\n\n  ['A_Const'](node, context) {\n    if (node.val.String) {\n      return this.escape(this.deparse(node.val, context));\n    }\n\n    return this.deparse(node.val, context);\n  }\n\n  ['A_Indices'](node) {\n    if (node.lidx) {\n      return format('[%s:%s]', this.deparse(node.lidx), this.deparse(node.uidx));\n    }\n\n    return format('[%s]', this.deparse(node.uidx));\n  }\n\n  ['A_Indirection'](node) {\n    const output = [ `(${this.deparse(node.arg)})` ];\n\n    // TODO(zhm) figure out the actual rules for when a '.' is needed\n    //\n    // select a.b[0] from a;\n    // select (select row(1)).*\n    // select c2[2].f2 from comptable\n    // select c2.a[2].f2[1].f3[0].a1 from comptable\n\n    for (let i = 0; i < node.indirection.length; i++) {\n      const subnode = node.indirection[i];\n\n      if (subnode.String || subnode.A_Star) {\n        const value = subnode.A_Star ? '*' : this.quote(subnode.String.str);\n\n        output.push(`.${value}`);\n      } else {\n        output.push(this.deparse(subnode));\n      }\n    }\n\n    return output.join('');\n  }\n\n  ['A_Star'](node, context) {\n    return '*';\n  }\n\n  ['BitString'](node) {\n    const prefix = node.str[0];\n    return `${prefix}'${node.str.substring(1)}'`;\n  }\n\n  ['BoolExpr'](node) {\n    switch (node.boolop) {\n      case 0:\n        return parens(this.list(node.args, ' AND '));\n      case 1:\n        return parens(this.list(node.args, ' OR '));\n      case 2:\n        return format('NOT (%s)', this.deparse(node.args[0]));\n      default:\n        return fail('BoolExpr', node);\n    }\n  }\n\n  ['BooleanTest'](node) {\n    const output = [];\n\n    output.push(this.deparse(node.arg));\n\n    const tests = [\n      'IS TRUE',\n      'IS NOT TRUE',\n      'IS FALSE',\n      'IS NOT FALSE',\n      'IS UNKNOWN',\n      'IS NOT UNKNOWN'\n    ];\n\n    output.push(tests[node.booltesttype]);\n\n    return output.join(' ');\n  }\n\n  ['CaseExpr'](node) {\n    const output = [ 'CASE' ];\n\n    if (node.arg) {\n      output.push(this.deparse(node.arg));\n    }\n\n    for (let i = 0; i < node.args.length; i++) {\n      output.push(this.deparse(node.args[i]));\n    }\n\n    if (node.defresult) {\n      output.push('ELSE');\n      output.push(this.deparse(node.defresult));\n    }\n\n    output.push('END');\n\n    return output.join(' ');\n  }\n\n  ['CoalesceExpr'](node) {\n    return format('COALESCE(%s)', this.list(node.args));\n  }\n\n  ['CollateClause'](node) {\n    const output = [];\n\n    if (node.arg) {\n      output.push(this.deparse(node.arg));\n    }\n\n    output.push('COLLATE');\n\n    if (node.collname) {\n      output.push(this.quote(this.deparseNodes(node.collname)));\n    }\n\n    return output.join(' ');\n  }\n\n  ['ColumnDef'](node) {\n    const output = [ this.quote(node.colname) ];\n\n    output.push(this.deparse(node.typeName));\n\n    if (node.raw_default) {\n      output.push('USING');\n      output.push(this.deparse(node.raw_default));\n    }\n\n    if (node.constraints) {\n      output.push(this.list(node.constraints, ' '));\n    }\n\n    if (node.collClause) {\n      output.push('COLLATE');\n      const str = dotty.get(node, 'collClause.CollateClause.collname.0.String.str');\n      output.push(this.quote(str));\n    }\n\n    return _.compact(output).join(' ');\n  }\n\n  ['ColumnRef'](node, context) {\n    const KEYWORDS = [ 'old', 'new' ];\n    const fields = node.fields.map(field => {\n      if (field.String) {\n        const value = this.deparse(field);\n        if (context === 'trigger' && KEYWORDS.includes(value.toLowerCase())) {\n          return value.toUpperCase();\n        }\n        return this.quote(value);\n      }\n\n      return this.deparse(field);\n    });\n    return fields.join('.');\n  }\n\n  ['CommentStmt'](node) {\n    const output = [];\n\n    output.push('COMMENT');\n    output.push('ON');\n    output.push(POSTGRES_TYPES[node.objtype]);\n\n    if (node.objtype === 4) {\n      // CAST\n      output.push('(');\n      output.push(this.listQuotes(node.objname, '.'));\n      output.push('AS');\n      output.push(this.list(node.objargs));\n      output.push(')');\n    } else if (node.objtype === 12) {\n      // CONSTRAINT ON Domain\n      // COMMENT ON CONSTRAINT dom_col_constr ON DOMAIN dom IS 'Constrains col of domain'\n      output.push(this.listQuotes(node.objargs));\n      output.push('ON');\n      output.push('DOMAIN');\n      output.push(this.listQuotes(node.objname));\n    } else if (node.objtype === 23 || node.objtype === 25) {\n      // OPERATOR CLASS\n      // OPERATOR FAMILY\n      output.push(this.deparse(node.objname[1]));\n      output.push('USING');\n      output.push(this.deparse(node.objname[0]));\n    } else if (node.objtype === 24) {\n      // OPERATOR\n      output.push(dotty.get(node, 'objname.0.String.str'));\n\n      if (node.objargs) {\n        output.push('(');\n        output.push(node.objargs.map(arg => {\n          if (arg === null) {\n            return 'NONE';\n          }\n          return this.deparse(arg);\n        }).join(','));\n        // output.push(this.list(node.objargs));\n        output.push(')');\n      }\n    } else if (node.objtype === 26) {\n      // POLICY\n      output.push(this.deparse(node.objname[1]));\n      output.push('ON');\n      output.push(this.deparse(node.objname[0]));\n    } else if (node.objtype === 27) {\n      // ROLE\n      output.push(dotty.get(node, 'objname.0.String.str'));\n    } else if (node.objtype === 28) {\n      // RULE\n      output.push(this.deparse(node.objname[1]));\n      output.push('ON');\n      output.push(this.deparse(node.objname[0]));\n    } else if (node.objtype === 31) {\n      // CONSTRAINT\n      output.push(this.deparse(node.objname[1]));\n      output.push('ON');\n      output.push(this.deparse(node.objname[0]));\n    } else if (node.objtype === 34) {\n      // TRANSFORM\n      output.push('FOR');\n      output.push(this.listQuotes(node.objname));\n      output.push('LANGUAGE');\n      output.push(dotty.get(node, 'objargs.0.String.str'));\n    } else if (node.objtype === 35) {\n      // TRIGGER\n      output.push(this.deparse(node.objname[1]));\n      output.push('ON');\n      output.push(this.deparse(node.objname[0]));\n    } else {\n      if (node.objtype === 21) {\n        output.push(dotty.get(node, 'objname.0.Integer.ival'));\n      } else {\n        output.push(this.listQuotes(node.objname, '.'));\n      }\n\n      if (node.objargs) {\n        output.push('(');\n        output.push(this.list(node.objargs));\n        output.push(')');\n      }\n    }\n    output.push('IS');\n    if (node.comment) {\n      output.push(`E'${node.comment}'`);\n    } else {\n      output.push('NULL');\n    }\n\n    return output.join(' ');\n  }\n\n  ['CommonTableExpr'](node) {\n    const output = [];\n\n    output.push(node.ctename);\n\n    if (node.aliascolnames) {\n      output.push(format('(%s)', this.quote(this.deparseNodes(node.aliascolnames))));\n    }\n\n    output.push(format('AS (%s)', this.deparse(node.ctequery)));\n\n    return output.join(' ');\n  }\n\n  ['DefElem'](node) {\n    if (node.defname === 'transaction_isolation') {\n      return format('ISOLATION LEVEL %s', node.arg.A_Const.val.String.str.toUpperCase());\n    }\n\n    if (node.defname === 'transaction_read_only') {\n      return node.arg.A_Const.val.Integer.ival === 0 ? 'READ WRITE' : 'READ ONLY';\n    }\n\n    if (node.defname === 'transaction_deferrable') {\n      return node.arg.A_Const.val.Integer.ival === 0 ? 'NOT DEFERRABLE' : 'DEFERRABLE';\n    }\n\n    if (node.defname === 'set') {\n      return this.deparse(node.arg);\n    }\n\n    let name = node.defname;\n    if (node.defnamespace) {\n      name = `${node.defnamespace}.${node.defname}`;\n    }\n\n    if (node.arg) {\n      return `${name} = ${this.deparse(node.arg)}`;\n    }\n    return name;\n  }\n\n  ['Float'](node) {\n    // wrap negative numbers in parens, SELECT (-2147483648)::int4 * (-1)::int4\n    if (node.str[0] === '-') {\n      return `(${node.str})`;\n    }\n\n    return node.str;\n  }\n\n  ['FuncCall'](node, context) {\n    const output = [];\n\n    let params = [];\n\n    if (node.args) {\n      params = node.args.map(item => {\n        return this.deparse(item);\n      });\n    }\n\n    // COUNT(*)\n    if (node.agg_star) {\n      params.push('*');\n    }\n\n    const name = this.list(node.funcname, '.');\n\n    const order = [];\n\n    const withinGroup = node.agg_within_group;\n\n    if (node.agg_order) {\n      order.push('ORDER BY');\n      order.push(this.list(node.agg_order, ', '));\n    }\n\n    const call = [];\n\n    call.push(name + '(');\n\n    if (node.agg_distinct) {\n      call.push('DISTINCT ');\n    }\n\n    // prepend variadic before the last parameter\n    // SELECT CONCAT('|', VARIADIC ARRAY['1','2','3'])\n    if (node.func_variadic) {\n      params[params.length - 1] = 'VARIADIC ' + params[params.length - 1];\n    }\n\n    call.push(params.join(', '));\n\n    if (order.length && !withinGroup) {\n      call.push(' ');\n      call.push(order.join(' '));\n    }\n\n    call.push(')');\n\n    output.push(compact(call).join(''));\n\n    if (order.length && withinGroup) {\n      output.push('WITHIN GROUP');\n      output.push(parens(order.join(' ')));\n    }\n\n    if (node.agg_filter != null) {\n      output.push(format('FILTER (WHERE %s)', this.deparse(node.agg_filter)));\n    }\n\n    if (node.over != null) {\n      output.push(format('OVER %s', this.deparse(node.over)));\n    }\n\n    return output.join(' ');\n  }\n\n  ['GroupingFunc'](node) {\n    return 'GROUPING(' + this.list(node.args) + ')';\n  }\n\n  ['GroupingSet'](node) {\n    switch (node.kind) {\n      case 0: // GROUPING_SET_EMPTY\n        return '()';\n\n      case 1: // GROUPING_SET_SIMPLE\n        return fail('GroupingSet', node);\n\n      case 2: // GROUPING_SET_ROLLUP\n        return 'ROLLUP (' + this.list(node.content) + ')';\n\n      case 3: // GROUPING_SET_CUBE\n        return 'CUBE (' + this.list(node.content) + ')';\n\n      case 4: // GROUPING_SET_SETS\n        return 'GROUPING SETS (' + this.list(node.content) + ')';\n\n      default:\n        return fail('GroupingSet', node);\n    }\n  }\n\n  ['Integer'](node, context) {\n    if (node.ival < 0 && context !== 'simple') {\n      return `(${node.ival})`;\n    }\n\n    return node.ival.toString();\n  }\n\n  ['IntoClause'](node) {\n    return this.deparse(node.rel);\n  }\n\n  ['JoinExpr'](node, context) {\n    const output = [];\n\n    output.push(this.deparse(node.larg));\n\n    if (node.isNatural) {\n      output.push('NATURAL');\n    }\n\n    let join = null;\n\n    switch (true) {\n      case node.jointype === 0 && (node.quals != null):\n        join = 'INNER JOIN';\n        break;\n\n      case node.jointype === 0 && !node.isNatural && !(node.quals != null) && !(node.usingClause != null):\n        join = 'CROSS JOIN';\n        break;\n\n      case node.jointype === 0:\n        join = 'JOIN';\n        break;\n\n      case node.jointype === 1:\n        join = 'LEFT OUTER JOIN';\n        break;\n\n      case node.jointype === 2:\n        join = 'FULL OUTER JOIN';\n        break;\n\n      case node.jointype === 3:\n        join = 'RIGHT OUTER JOIN';\n        break;\n\n      default:\n        fail('JoinExpr', node);\n        break;\n    }\n\n    output.push(join);\n\n    if (node.rarg) {\n      // wrap nested join expressions in parens to make the following symmetric:\n      // select * from int8_tbl x cross join (int4_tbl x cross join lateral (select x.f1) ss)\n      if ((node.rarg.JoinExpr != null) && !(node.rarg.JoinExpr.alias != null)) {\n        output.push(`(${this.deparse(node.rarg)})`);\n      } else {\n        output.push(this.deparse(node.rarg));\n      }\n    }\n\n    if (node.quals) {\n      output.push(`ON ${this.deparse(node.quals)}`);\n    }\n\n    if (node.usingClause) {\n      const using = this.quote(this.deparseNodes(node.usingClause)).join(', ');\n\n      output.push(`USING (${using})`);\n    }\n\n    const wrapped =\n      (node.rarg.JoinExpr != null) || node.alias ? '(' + output.join(' ') + ')' : output.join(' ');\n\n    if (node.alias) {\n      return wrapped + ' ' + this.deparse(node.alias);\n    }\n\n    return wrapped;\n  }\n\n  ['LockingClause'](node) {\n    const strengths = [\n      'NONE', // LCS_NONE\n      'FOR KEY SHARE',\n      'FOR SHARE',\n      'FOR NO KEY UPDATE',\n      'FOR UPDATE'\n    ];\n\n    const output = [];\n\n    output.push(strengths[node.strength]);\n\n    if (node.lockedRels) {\n      output.push('OF');\n      output.push(this.list(node.lockedRels));\n    }\n\n    return output.join(' ');\n  }\n\n  ['MinMaxExpr'](node) {\n    const output = [];\n\n    if (node.op === 0) {\n      output.push('GREATEST');\n    } else {\n      output.push('LEAST');\n    }\n\n    output.push(parens(this.list(node.args)));\n\n    return output.join('');\n  }\n\n  ['NamedArgExpr'](node) {\n    const output = [];\n\n    output.push(node.name);\n    output.push(':=');\n    output.push(this.deparse(node.arg));\n\n    return output.join(' ');\n  }\n\n  ['Null'](node) {\n    return 'NULL';\n  }\n\n  ['NullTest'](node) {\n    const output = [ this.deparse(node.arg) ];\n\n    if (node.nulltesttype === 0) {\n      output.push('IS NULL');\n    } else if (node.nulltesttype === 1) {\n      output.push('IS NOT NULL');\n    }\n\n    return output.join(' ');\n  }\n\n  ['ParamRef'](node) {\n    if (node.number >= 0) {\n      return [ '$', node.number ].join('');\n    }\n    return '?';\n  }\n\n  ['RangeFunction'](node) {\n    const output = [];\n\n    if (node.lateral) {\n      output.push('LATERAL');\n    }\n\n    const funcs = [];\n\n    for (let i = 0; i < node.functions.length; i++) {\n      const funcCall = node.functions[i];\n      const call = [ this.deparse(funcCall[0]) ];\n\n      if (funcCall[1] && funcCall[1].length) {\n        call.push(format('AS (%s)', this.list(funcCall[1])));\n      }\n\n      funcs.push(call.join(' '));\n    }\n\n    const calls = funcs.join(', ');\n\n    if (node.is_rowsfrom) {\n      output.push(`ROWS FROM (${calls})`);\n    } else {\n      output.push(calls);\n    }\n\n    if (node.ordinality) {\n      output.push('WITH ORDINALITY');\n    }\n\n    if (node.alias) {\n      output.push(this.deparse(node.alias));\n    }\n\n    if (node.coldeflist) {\n      const defList = this.list(node.coldeflist);\n\n      if (!node.alias) {\n        output.push(` AS (${defList})`);\n      } else {\n        output.push(`(${defList})`);\n      }\n    }\n\n    return output.join(' ');\n  }\n\n  ['RangeSubselect'](node, context) {\n    let output = '';\n\n    if (node.lateral) {\n      output += 'LATERAL ';\n    }\n\n    output += parens(this.deparse(node.subquery));\n\n    if (node.alias) {\n      return output + ' ' + this.deparse(node.alias);\n    }\n\n    return output;\n  }\n\n  ['RangeTableSample'](node) {\n    const output = [];\n\n    output.push(this.deparse(node.relation));\n    output.push('TABLESAMPLE');\n    output.push(this.deparse(node.method[0]));\n\n    if (node.args) {\n      output.push(parens(this.list(node.args)));\n    }\n\n    if (node.repeatable) {\n      output.push('REPEATABLE(' + this.deparse(node.repeatable) + ')');\n    }\n\n    return output.join(' ');\n  }\n\n  ['RangeVar'](node, context) {\n    const output = [];\n\n    if (node.inhOpt === 0) {\n      output.push('ONLY');\n    }\n\n    if (node.relpersistence === 'u') {\n      output.push('UNLOGGED');\n    }\n\n    if (node.relpersistence === 't') {\n      output.push('TEMPORARY TABLE');\n    }\n\n    if (node.schemaname != null) {\n      output.push(this.quote(node.schemaname));\n      output.push('.');\n    }\n\n    output.push(this.quote(node.relname));\n\n    if (node.alias) {\n      output.push(this.deparse(node.alias));\n    }\n\n    return output.join(' ');\n  }\n\n  ['ResTarget'](node, context) {\n    if (context === 'select') {\n      return compact([ this.deparse(node.val), this.quote(node.name) ]).join(' AS ');\n    } else if (context === 'update') {\n      return compact([ node.name, this.deparse(node.val) ]).join(' = ');\n    } else if (!(node.val != null)) {\n      return this.quote(node.name);\n    }\n\n    return fail('ResTarget', node);\n  }\n\n  ['RowExpr'](node) {\n    if (node.row_format === 2) {\n      return parens(this.list(node.args));\n    }\n\n    return format('ROW(%s)', this.list(node.args));\n  }\n\n  ['SelectStmt'](node, context) {\n    const output = [];\n\n    if (node.withClause) {\n      output.push(this.deparse(node.withClause));\n    }\n\n    if (node.op === 0) {\n      // VALUES select's don't get SELECT\n      if (node.valuesLists == null) {\n        output.push('SELECT');\n      }\n    } else {\n      output.push(parens(this.deparse(node.larg)));\n\n      const sets = [\n        'NONE',\n        'UNION',\n        'INTERSECT',\n        'EXCEPT'\n      ];\n\n      output.push(sets[node.op]);\n\n      if (node.all) {\n        output.push('ALL');\n      }\n\n      output.push(parens(this.deparse(node.rarg)));\n    }\n\n    if (node.distinctClause) {\n      if (node.distinctClause[0] != null) {\n        output.push('DISTINCT ON');\n\n        const clause = (node.distinctClause.map(e => this.deparse(e, 'select'))).join(',\\n');\n\n        output.push(`(${clause})`);\n      } else {\n        output.push('DISTINCT');\n      }\n    }\n\n    if (node.targetList) {\n      output.push(indent((node.targetList.map(e => this.deparse(e, 'select'))).join(',\\n')));\n    }\n\n    if (node.intoClause) {\n      output.push('INTO');\n      output.push(indent(this.deparse(node.intoClause)));\n    }\n\n    if (node.fromClause) {\n      output.push('FROM');\n      output.push(indent((node.fromClause.map(e => this.deparse(e, 'from'))).join(',\\n')));\n    }\n\n    if (node.whereClause) {\n      output.push('WHERE');\n      output.push(indent(this.deparse(node.whereClause)));\n    }\n\n    if (node.valuesLists) {\n      output.push('VALUES');\n\n      const lists = node.valuesLists.map(list => {\n        return `(${(list.map(v => this.deparse(v))).join(', ')})`;\n      });\n\n      output.push(lists.join(', '));\n    }\n\n    if (node.groupClause) {\n      output.push('GROUP BY');\n      output.push(indent((node.groupClause.map(e => this.deparse(e, 'group'))).join(',\\n')));\n    }\n\n    if (node.havingClause) {\n      output.push('HAVING');\n      output.push(indent(this.deparse(node.havingClause)));\n    }\n\n    if (node.windowClause) {\n      output.push('WINDOW');\n\n      const windows = [];\n\n      for (let i = 0; i < node.windowClause.length; i++) {\n        const w = node.windowClause[i];\n        const window = [];\n\n        if (w.WindowDef.name) {\n          window.push(this.quote(w.WindowDef.name) + ' AS');\n        }\n\n        window.push(parens(this.deparse(w, 'window')));\n\n        windows.push(window.join(' '));\n      }\n\n      output.push(windows.join(', '));\n    }\n\n    if (node.sortClause) {\n      output.push('ORDER BY');\n      output.push(indent((node.sortClause.map(e => this.deparse(e, 'sort'))).join(',\\n')));\n    }\n\n    if (node.limitCount) {\n      output.push('LIMIT');\n      output.push(indent(this.deparse(node.limitCount)));\n    }\n\n    if (node.limitOffset) {\n      output.push('OFFSET');\n      output.push(indent(this.deparse(node.limitOffset)));\n    }\n\n    if (node.lockingClause) {\n      node.lockingClause.forEach(item => {\n        return output.push(this.deparse(item));\n      });\n    }\n\n    return output.join(' ');\n  }\n\n  ['AlterTableStmt'](node) {\n    const output = [];\n    output.push('ALTER');\n    if (node.relkind === 32) {\n      output.push('TABLE');\n    } else if (node.relkind === 42) {\n      output.push('VIEW');\n    } else if (node.relkind === 40) {\n      output.push('TYPE');\n    } else {\n      output.push('TABLE');\n    }\n    if (node.missing_ok) {\n      output.push('IF EXISTS');\n    }\n    output.push(this.deparse(node.relation));\n    output.push(this.list(node.cmds));\n\n    return output.join(' ');\n  }\n\n  ['AlterTableCmd'](node) {\n    const output = [];\n\n    if (node.subtype === 0) {\n      output.push('ADD COLUMN');\n      output.push(this.quote(node.name));\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 3) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      if (node.def) {\n        output.push('SET DEFAULT');\n        output.push(this.deparse(node.def));\n      } else {\n        output.push('DROP DEFAULT');\n      }\n    }\n\n    if (node.subtype === 4) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('DROP NOT NULL');\n    }\n\n    if (node.subtype === 5) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('SET NOT NULL');\n    }\n\n    if (node.subtype === 6) {\n      output.push('ALTER');\n      output.push(this.quote(node.name));\n      output.push('SET STATISTICS');\n      output.push(dotty.get(node, 'def.Integer.ival'));\n    }\n\n    if (node.subtype === 7) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('SET');\n      output.push('(');\n      output.push(this.list(node.def));\n      output.push(')');\n    }\n\n    if (node.subtype === 9) {\n      output.push('ALTER');\n      output.push(this.quote(node.name));\n      output.push('SET STORAGE');\n      if (node.def) {\n        output.push(this.deparse(node.def));\n      } else {\n        output.push('PLAIN');\n      }\n    }\n\n    if (node.subtype === 10) {\n      output.push('DROP');\n      if (node.missing_ok) {\n        output.push('IF EXISTS');\n      }\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 14) {\n      // output.push('ADD CONSTRAINT');\n      output.push('ADD');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 18) {\n      output.push('VALIDATE CONSTRAINT');\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 22) {\n      output.push('DROP CONSTRAINT');\n      if (node.missing_ok) {\n        output.push('IF EXISTS');\n      }\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 25) {\n      output.push('ALTER COLUMN');\n      output.push(this.quote(node.name));\n      output.push('TYPE');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 28) {\n      output.push('CLUSTER ON');\n      output.push(this.quote(node.name));\n    }\n\n    if (node.subtype === 29) {\n      output.push('SET WITHOUT CLUSTER');\n    }\n\n    if (node.subtype === 32) {\n      output.push('SET WITH OIDS');\n    }\n\n    if (node.subtype === 34) {\n      output.push('SET WITHOUT OIDS');\n    }\n\n    if (node.subtype === 36) {\n      output.push('SET');\n      output.push('(');\n      output.push(this.list(node.def));\n      output.push(')');\n    }\n\n    if (node.subtype === 37) {\n      output.push('RESET');\n      output.push('(');\n      output.push(this.list(node.def));\n      output.push(')');\n    }\n\n    if (node.subtype === 51) {\n      output.push('INHERIT');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 52) {\n      output.push('NO INHERIT');\n      output.push(this.deparse(node.def));\n    }\n\n    if (node.subtype === 56) {\n      output.push('ENABLE ROW LEVEL SECURITY');\n    }\n    if (node.subtype === 57) {\n      output.push('DISABLE ROW LEVEL SECURITY');\n    }\n    if (node.subtype === 58) {\n      output.push('FORCE ROW SECURITY');\n    }\n    if (node.subtype === 59) {\n      output.push('NO FORCE ROW SECURITY');\n    }\n\n    return output.join(' ');\n  }\n\n  ['CreateTrigStmt'](node) {\n    const output = [];\n\n    output.push('CREATE');\n    if (node.isconstraint) {\n      output.push('CONSTRAINT');\n    }\n    output.push('TRIGGER');\n    output.push(this.quote(node.trigname));\n    output.push('\\n');\n\n    // int16 timing;  BEFORE, AFTER, or INSTEAD\n\n    if (node.timing === 64) {\n      output.push('INSTEAD OF');\n    } else if (node.timing === 2) {\n      output.push('BEFORE');\n    } else {\n      output.push('AFTER');\n    }\n\n    // int16 events;  \"OR\" of INSERT/UPDATE/DELETE/TRUNCATE\n\n    //  4 = 0b000100 (insert)\n    //  8 = 0b001000 (delete)\n    // 16 = 0b010000 (update)\n    // 32 = 0b100000 (TRUNCATE)\n\n    const TRIGGER_EVENTS = {\n      INSERT: 4,\n      DELETE: 8,\n      UPDATE: 16,\n      TRUNCATE: 32\n    };\n\n    const events = [];\n    if ((TRIGGER_EVENTS.INSERT & node.events) === TRIGGER_EVENTS.INSERT) {\n      events.push('INSERT');\n    }\n    if ((TRIGGER_EVENTS.UPDATE & node.events) === TRIGGER_EVENTS.UPDATE) {\n      events.push('UPDATE');\n    }\n    if ((TRIGGER_EVENTS.DELETE & node.events) === TRIGGER_EVENTS.DELETE) {\n      events.push('DELETE');\n    }\n    if ((TRIGGER_EVENTS.TRUNCATE & node.events) === TRIGGER_EVENTS.TRUNCATE) {\n      events.push('TRUNCATE');\n    }\n\n    // events\n    output.push(events.join(' OR '));\n\n    // columns\n    if (node.columns) {\n      output.push('OF');\n      output.push(this.list(node.columns));\n    }\n\n    // ON\n    output.push('ON');\n    output.push(this.deparse(node.relation));\n    output.push('\\n');\n\n    // opts\n    if (node.deferrable || node.initdeferred) {\n      if (node.deferrable) {\n        output.push('DEFERRABLE');\n      }\n      if (node.deferrable) {\n        output.push('INITIALLY DEFERRED');\n      }\n      output.push('\\n');\n    }\n\n    if (node.row) {\n      output.push('FOR EACH ROW\\n');\n    } else {\n      output.push('FOR EACH STATEMENT\\n');\n    }\n\n    if (node.whenClause) {\n      output.push('WHEN');\n      output.push('(');\n      output.push(this.deparse(node.whenClause, 'trigger'));\n      output.push(')');\n      output.push('\\n');\n    }\n\n    output.push('EXECUTE PROCEDURE');\n    output.push(this.listQuotes(node.funcname).split(',').join('.'));\n    output.push('(');\n    let args = [];\n    if (node.args) {\n      args = node.args;\n    }\n    // seems that it's only parsing strings?\n    args = args.map(arg => {\n      if (dotty.exists(arg, 'String.str')) {\n        return `'${dotty.get(arg, 'String.str')}'`;\n      }\n      return this.deparse(arg);\n    }).filter(a => a);\n    output.push(args.join(','));\n    output.push(')');\n\n    return output.join(' ');\n  }\n\n  ['CreateStmt'](node) {\n    const output = [];\n    const relpersistence = dotty.get(node, 'relation.RangeVar.relpersistence');\n    if (relpersistence === 't') {\n      output.push('CREATE');\n    } else {\n      output.push('CREATE TABLE');\n    }\n    output.push(this.deparse(node.relation));\n    output.push('(');\n    output.push(this.list(node.tableElts));\n    output.push(')');\n\n    if (relpersistence === 'p' && node.hasOwnProperty('inhRelations')) {\n      output.push('INHERITS');\n      output.push('(');\n      output.push(this.list(node.inhRelations));\n      output.push(')');\n    }\n\n    if (node.options) {\n      node.options.forEach(opt => {\n        if (dotty.get(opt, 'DefElem.defname') === 'oids') {\n          if (Number(dotty.get(opt, 'DefElem.arg.Integer.ival')) === 1) {\n            output.push('WITH OIDS');\n          } else {\n            output.push('WITHOUT OIDS');\n          }\n        }\n      });\n    }\n    return output.join(' ');\n  }\n\n  ['ConstraintStmt'](node) {\n    const output = [];\n    const constraint = CONSTRAINT_TYPES[node.contype];\n    if (node.conname) {\n      output.push('CONSTRAINT');\n      output.push(node.conname);\n      if (!node.pktable) {\n        output.push(constraint);\n      }\n    } else {\n      output.push(constraint);\n    }\n    return output.join(' ');\n  }\n\n  ['ReferenceConstraint'](node) {\n    const output = [];\n    if (node.pk_attrs && node.fk_attrs) {\n      if (node.conname) {\n        output.push('CONSTRAINT');\n        output.push(node.conname);\n      }\n      output.push('FOREIGN KEY');\n      output.push('(');\n      output.push(this.listQuotes(node.fk_attrs));\n      output.push(')');\n      output.push('REFERENCES');\n      output.push(this.deparse(node.pktable));\n      output.push('(');\n      output.push(this.listQuotes(node.pk_attrs));\n      output.push(')');\n    } else if (node.pk_attrs) {\n      output.push(this.ConstraintStmt(node));\n      output.push(this.deparse(node.pktable));\n      output.push('(');\n      output.push(this.listQuotes(node.pk_attrs));\n      output.push(')');\n    } else if (node.fk_attrs) {\n      if (node.conname) {\n        output.push('CONSTRAINT');\n        output.push(node.conname);\n      }\n      output.push('FOREIGN KEY');\n      output.push('(');\n      output.push(this.listQuotes(node.fk_attrs));\n      output.push(')');\n      output.push('REFERENCES');\n      output.push(this.deparse(node.pktable));\n    } else {\n      output.push(this.ConstraintStmt(node));\n      output.push(this.deparse(node.pktable));\n    }\n    return output.join(' ');\n  }\n\n  ['ExclusionConstraint'](node) {\n    const output = [];\n    function getExclusionGroup(nde) {\n      const out = [];\n      const a = nde.exclusions.map(excl => {\n        if (excl[0].IndexElem.name) {\n          return excl[0].IndexElem.name;\n        }\n        return excl[0].IndexElem.expr ? this.deparse(excl[0].IndexElem.expr) : null;\n      });\n\n      const b = nde.exclusions.map(excl => this.deparse(excl[1][0]));\n\n      for (let i = 0; i < a.length; i++) {\n        out.push(`${a[i]} WITH ${b[i]}`);\n        if (i !== a.length - 1) {\n          out.push(',');\n        }\n      }\n\n      return out.join(' ');\n    }\n\n    if (node.exclusions && node.access_method) {\n      output.push('USING');\n      output.push(node.access_method);\n      output.push('(');\n      output.push(getExclusionGroup.call(this, node));\n      output.push(')');\n    }\n\n    return output.join(' ');\n  }\n\n  ['Constraint'](node) {\n    const output = [];\n\n    const constraint = CONSTRAINT_TYPES[node.contype];\n    if (!constraint) {\n      throw new Error('type not implemented: ' + node.contype);\n    }\n\n    if (constraint === 'REFERENCES') {\n      output.push(this.ReferenceConstraint(node));\n    } else {\n      output.push(this.ConstraintStmt(node));\n    }\n\n    if (node.keys) {\n      output.push('(');\n      output.push(this.listQuotes(node.keys));\n      output.push(')');\n    }\n\n    if (node.raw_expr) {\n      output.push('(');\n      output.push(this.deparse(node.raw_expr));\n      output.push(')');\n    }\n\n    if (node.fk_del_action) {\n      switch (node.fk_del_action) {\n        case 'r':\n          output.push('ON DELETE RESTRICT');\n          break;\n        case 'c':\n          output.push('ON DELETE CASCADE');\n          break;\n        default:\n      }\n    }\n\n    if (node.fk_upd_action) {\n      switch (node.fk_upd_action) {\n        case 'r':\n          output.push('ON UPDATE RESTRICT');\n          break;\n        case 'c':\n          output.push('ON UPDATE CASCADE');\n          break;\n        default:\n      }\n    }\n\n    if (node.fk_matchtype === 'f') {\n      output.push('MATCH FULL');\n    }\n\n    if (node.is_no_inherit === true) {\n      output.push('NO INHERIT');\n    }\n\n    if (node.skip_validation === true) {\n      output.push('NOT VALID');\n    }\n\n    if (constraint === 'EXCLUDE') {\n      output.push(this.ExclusionConstraint(node));\n    }\n\n    if (node.deferrable) {\n      output.push('deferrable');\n    }\n\n    return output.join(' ');\n  }\n\n  ['AccessPriv'](node) {\n    const output = [];\n    if (node.priv_name) {\n      output.push(node.priv_name.toUpperCase());\n    } else {\n      output.push('ALL');\n    }\n    if (node.cols) {\n      output.push('(');\n      output.push(this.list(node.cols));\n      output.push(')');\n    }\n    return output.join(' ');\n  }\n\n  ['VariableSetStmt'](node) {\n    if (node.kind === 4) {\n      return format('RESET %s', node.name);\n    }\n\n    if (node.kind === 3) {\n      const name = {\n        'TRANSACTION': 'TRANSACTION',\n        'SESSION CHARACTERISTICS': 'SESSION CHARACTERISTICS AS TRANSACTION'\n      }[node.name];\n\n      return format('SET %s %s',\n                    name,\n                    this.deparseNodes(node.args, 'simple').join(', '));\n    }\n\n    if (node.kind === 1) {\n      return format('SET %s TO DEFAULT', node.name);\n    }\n\n    return format('SET %s%s = %s',\n                  node.is_local ? 'LOCAL ' : '',\n                  node.name,\n                  this.deparseNodes(node.args, 'simple').join(', '));\n  }\n\n  ['VariableShowStmt'](node) {\n    return format('SHOW %s', node.name);\n  }\n\n  ['FuncWithArgs'](node) {\n    const output = [];\n    output.push(this.deparse(node.funcname[0]));\n    output.push('(');\n    output.push(this.list(node.funcargs));\n    output.push(')');\n    return output.join(' ');\n  }\n\n  ['FunctionParameter'](node) {\n    const output = [];\n\n    if (node.mode === 118) {\n      output.push('VARIADIC');\n    }\n\n    if (node.mode === 111) {\n      output.push('OUT');\n    }\n\n    if (node.mode === 98) {\n      output.push('INOUT');\n    }\n\n    output.push(node.name);\n    output.push(this.deparse(node.argType));\n\n    if (node.defexpr) {\n      output.push('DEFAULT');\n      output.push(this.deparse(node.defexpr));\n    }\n\n    return output.join(' ');\n  }\n\n  ['CreateFunctionStmt'](node) {\n    const output = [];\n\n    output.push('CREATE');\n    if (node.replace) {\n      output.push('OR REPLACE');\n    }\n    output.push('FUNCTION');\n\n    output.push(node.funcname.map(name => this.deparse(name)).join('.'));\n    output.push('(');\n    let parameters = [];\n    if (node.parameters) {\n      parameters = [ ...node.parameters ];\n    }\n    const parametersList = parameters.filter(\n      ({ FunctionParameter }) =>\n        FunctionParameter.mode === 118 ||\n        FunctionParameter.mode === 111 ||\n        FunctionParameter.mode === 98 ||\n        FunctionParameter.mode === 105\n    );\n    output.push(this.list(parametersList));\n    output.push(')');\n\n    const returns = parameters.filter(\n      ({ FunctionParameter }) => FunctionParameter.mode === 116\n    );\n\n    // const outs = parameters.filter(\n    //   ({ FunctionParameter }) => FunctionParameter.mode === 111\n    // );\n\n    // var setof = node.parameters.filter(\n    //   ({ FunctionParameter }) => FunctionParameter.mode === 109\n    // );\n\n    if (returns.length > 0) {\n      output.push('RETURNS');\n      output.push('TABLE');\n      output.push('(');\n      output.push(this.list(returns));\n      output.push(')');\n    } else if (node.returnType) {\n      output.push('RETURNS');\n      output.push(this.deparse(node.returnType));\n    }\n\n    node.options.forEach((option, i) => {\n      if (option && option.DefElem) {\n        let value = '';\n        switch (option.DefElem.defname) {\n          case 'as':\n            value = this.deparse(option.DefElem.arg[0]);\n            output.push(`AS $EOFCODE$${value}$EOFCODE$`);\n            break;\n\n          case 'language':\n            value = this.deparse(option.DefElem.arg);\n            output.push('LANGUAGE');\n            output.push(value);\n            break;\n\n          case 'security':\n            output.push('SECURITY');\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('DEFINER');\n            } else {\n              output.push('INVOKER');\n            }\n            break;\n\n          case 'leakproof':\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('LEAKPROOF');\n            }\n            break;\n\n          case 'window':\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('WINDOW');\n            }\n            break;\n\n          case 'strict':\n            value = Number(option.DefElem.arg.Integer.ival);\n            if (value > 0) {\n              output.push('STRICT');\n            } else {\n              output.push('CALLED ON NULL INPUT');\n            }\n            break;\n\n          case 'set':\n            output.push(this.deparse(option));\n            break;\n\n          case 'volatility':\n            value = this.deparse(option.DefElem.arg);\n            output.push(value.toUpperCase());\n            break;\n\n          default:\n        }\n      }\n    });\n    return output.join(' ');\n  }\n  ['CreateSchemaStmt'](node) {\n    const output = [];\n\n    output.push('CREATE');\n    if (node.replace) {\n      output.push('OR REPLACE');\n    }\n    output.push('SCHEMA');\n    output.push(node.schemaname);\n    return output.join(' ');\n  }\n\n  ['RoleSpec'](node) {\n    if (node.roletype === 0) {\n      return `\"${node.rolename}\"`;\n    }\n    if (node.roletype === 1) {\n      return 'CURRENT_USER';\n    }\n    if (node.roletype === 2) {\n      return 'SESSION_USER';\n    }\n    if (node.roletype === 3) {\n      return 'PUBLIC';\n    }\n    return '';\n  }\n\n  ['GrantStmt'](node) {\n    const output = [];\n\n    const getTypeFromNode = (nodeObj) => {\n      switch (nodeObj.objtype) {\n        case 1:\n          if (nodeObj.targtype === 1) {\n            return 'ALL TABLES IN SCHEMA';\n          }\n          return 'TABLE';\n        case 3:\n          return 'DATABASE';\n        case 4:\n          return 'DOMAIN';\n        case 5:\n          return 'FOREIGN DATA WRAPPER';\n        case 6:\n          return 'FOREIGN SERVER';\n        case 7:\n          if (nodeObj.targtype === 1) {\n            return 'ALL FUNCTIONS IN SCHEMA';\n          }\n          return 'FUNCTION';\n        case 8:\n          return 'LANGUAGE';\n        case 9:\n          return 'LARGE OBJECT';\n        case 10:\n          return 'SCHEMA';\n        case 12:\n          return 'TYPE';\n        default:\n      }\n      return '';\n    };\n\n    if ([ 1, 3, 4, 5, 6, 7, 8, 9, 10, 12 ].includes(node.objtype)) {\n      if (!node.is_grant) {\n        output.push('REVOKE');\n        if (node.grant_option) {\n          output.push('GRANT OPTION');\n          output.push('FOR');\n        }\n        if (node.privileges) {\n          output.push(this.list(node.privileges));\n        } else {\n          output.push('ALL');\n        }\n        output.push('ON');\n        output.push(getTypeFromNode(node));\n        output.push(this.list(node.objects));\n        output.push('FROM');\n        output.push(this.list(node.grantees));\n      } else {\n        output.push('GRANT');\n        if (node.privileges) {\n          output.push(this.list(node.privileges));\n        } else {\n          output.push('ALL');\n        }\n        output.push('ON');\n        output.push(getTypeFromNode(node));\n        output.push(this.list(node.objects));\n        output.push('TO');\n        output.push(this.list(node.grantees));\n        if (node.grant_option) {\n          output.push('WITH GRANT OPTION');\n        }\n      }\n      if (Number(node.behavior) === 1) {\n        output.push('CASCADE');\n      }\n    }\n\n    return output.join(' ');\n  }\n\n  ['GrantRoleStmt'](node) {\n    const output = [];\n\n    if (!node.is_grant) {\n      output.push('REVOKE');\n      output.push(this.list(node.granted_roles));\n      output.push('FROM');\n      output.push(this.list(node.grantee_roles));\n    } else {\n      output.push('GRANT');\n      output.push(this.list(node.granted_roles));\n      output.push('TO');\n      output.push(this.list(node.grantee_roles));\n    }\n    if (node.admin_opt) {\n      output.push('WITH ADMIN OPTION');\n    }\n\n    return output.join(' ');\n  }\n\n  ['CreateRoleStmt'](node) {\n    const output = [];\n\n    const roleOption = (nodeObj, i, val1, val2) => {\n      const val = Number(dotty.get(nodeObj, `options.${i}.DefElem.arg.Integer.ival`));\n      if (val > 0) {\n        output.push(val1);\n      } else {\n        output.push(val2);\n      }\n    };\n\n    output.push('CREATE');\n    if (Number(node.stmt_type) === 1) {\n      output.push('USER');\n    } else if (Number(node.stmt_type) === 2) {\n      output.push('GROUP');\n    } else {\n      output.push('ROLE');\n    }\n\n    output.push(`\"${node.role}\"`);\n\n    if (node.options) {\n      const opts = dotty.search(node, 'options.*.DefElem.defname');\n\n      if (opts.length === 1 && opts[0] === 'addroleto') {\n        // only one case\n      } else {\n        output.push('WITH');\n      }\n\n      opts.forEach((option, i) => {\n        let value = '';\n        switch (option) {\n          case 'canlogin':\n            roleOption(node, i, 'LOGIN', 'NOLOGIN');\n            break;\n          case 'addroleto':\n            output.push('IN ROLE');\n            output.push(dotty.search(node, `options.${i}.DefElem.arg.*.RoleSpec.rolename`).join(','));\n            break;\n          case 'password':\n            output.push('PASSWORD');\n            value = dotty.get(node, `options.${i}.DefElem.arg.String.str`);\n            output.push(`'${value}'`);\n            break;\n          case 'adminmembers':\n            output.push('ADMIN');\n            output.push(this.list(node.options[i].DefElem.arg));\n            break;\n          case 'rolemembers':\n            output.push('USER');\n            output.push(this.list(node.options[i].DefElem.arg));\n            break;\n          case 'createdb':\n            roleOption(node, i, 'CREATEDB', 'NOCREATEDB');\n            break;\n          case 'isreplication':\n            roleOption(node, i, 'REPLICATION', 'NOREPLICATION');\n            break;\n          case 'bypassrls':\n            roleOption(node, i, 'BYPASSRLS', 'NOBYPASSRLS');\n            break;\n          case 'inherit':\n            roleOption(node, i, 'INHERIT', 'NOINHERIT');\n            break;\n          case 'superuser':\n            roleOption(node, i, 'SUPERUSER', 'NOSUPERUSER');\n            break;\n          case 'createrole':\n            roleOption(node, i, 'CREATEROLE', 'NOCREATEROLE');\n            break;\n          case 'validUntil':\n            output.push('VALID UNTIL');\n            value = dotty.get(node, `options.${i}.DefElem.arg.String.str`);\n            output.push(`'${value}'`);\n            break;\n          default:\n        }\n      });\n    }\n    return output.join(' ');\n  }\n\n  ['TransactionStmt'](node) {\n    const output = [];\n\n    const begin = (nodeOpts) => {\n      const opts = dotty.search(nodeOpts, 'options.*.DefElem.defname');\n      if (opts.includes('transaction_read_only')) {\n        const index = opts.indexOf('transaction_read_only');\n        const obj = nodeOpts.options[index];\n        let set = false;\n        const flag = Number(this.deparse(dotty.get(obj, 'DefElem.arg')));\n        if (flag > 0) {\n          set = true;\n        }\n        if (set) {\n          return 'BEGIN TRANSACTION READ ONLY';\n        }\n        return 'BEGIN TRANSACTION READ WRITE';\n      }\n      if (opts.includes('transaction_isolation')) {\n        const index = opts.indexOf('transaction_isolation');\n        const obj = nodeOpts.options[index];\n        const lopts = this.deparse(dotty.get(obj, 'DefElem.arg')).replace(/['\"]+/g, '');\n        return `BEGIN TRANSACTION ISOLATION LEVEL ${lopts.toUpperCase()}`;\n      }\n      return 'BEGIN';\n    };\n\n    const start = (nodeOpts) => {\n      const opts = dotty.search(nodeOpts, 'options.*.DefElem.defname');\n      if (opts.includes('transaction_read_only')) {\n        const index = opts.indexOf('transaction_read_only');\n        const obj = nodeOpts.options[index];\n        let set = false;\n        const flag = Number(this.deparse(dotty.get(obj, 'DefElem.arg')));\n        if (flag > 0) {\n          set = true;\n        }\n        if (set) {\n          return 'START TRANSACTION READ ONLY';\n        }\n        return 'START TRANSACTION READ WRITE';\n      }\n\n      return 'START TRANSACTION';\n    };\n\n    switch (node.kind) {\n      case 0:\n        return begin(node);\n      case 1:\n        return start(node);\n      case 2:\n        return 'COMMIT';\n      case 3:\n        return 'ROLLBACK';\n      case 4:\n        output.push('SAVEPOINT');\n        output.push(this.deparse(node.options[0].DefElem.arg));\n        break;\n      case 5:\n        output.push('RELEASE SAVEPOINT');\n        output.push(this.deparse(node.options[0].DefElem.arg));\n        break;\n      case 6:\n        output.push('ROLLBACK TO');\n        output.push(this.deparse(node.options[0].DefElem.arg));\n        break;\n      case 7:\n        output.push('PREPARE TRANSACTION');\n        output.push(`'${node.gid}'`);\n        break;\n      case 8:\n        output.push('COMMIT PREPARED');\n        output.push(`'${node.gid}'`);\n        break;\n      case 9:\n        output.push('ROLLBACK PREPARED');\n        output.push(`'${node.gid}'`);\n        break;\n      default:\n    }\n    return output.join(' ');\n  }\n\n  ['SortBy'](node) {\n    const output = [];\n\n    output.push(this.deparse(node.node));\n\n    if (node.sortby_dir === 1) {\n      output.push('ASC');\n    }\n\n    if (node.sortby_dir === 2) {\n      output.push('DESC');\n    }\n\n    if (node.sortby_dir === 3) {\n      output.push(`USING ${this.deparseNodes(node.useOp)}`);\n    }\n\n    if (node.sortby_nulls === 1) {\n      output.push('NULLS FIRST');\n    }\n\n    if (node.sortby_nulls === 2) {\n      output.push('NULLS LAST');\n    }\n\n    return output.join(' ');\n  }\n\n  ['String'](node) {\n    return node.str;\n  }\n\n  ['SubLink'](node) {\n    switch (true) {\n      case node.subLinkType === 0:\n        return format('EXISTS (%s)', this.deparse(node.subselect));\n      case node.subLinkType === 1:\n        return format('%s %s ALL (%s)', this.deparse(node.testexpr), this.deparse(node.operName[0]), this.deparse(node.subselect));\n      case node.subLinkType === 2 && !(node.operName != null):\n        return format('%s IN (%s)', this.deparse(node.testexpr), this.deparse(node.subselect));\n      case node.subLinkType === 2:\n        return format('%s %s ANY (%s)', this.deparse(node.testexpr), this.deparse(node.operName[0]), this.deparse(node.subselect));\n      case node.subLinkType === 3:\n        return format('%s %s (%s)', this.deparse(node.testexpr), this.deparse(node.operName[0]), this.deparse(node.subselect));\n      case node.subLinkType === 4:\n        return format('(%s)', this.deparse(node.subselect));\n      case node.subLinkType === 5:\n        // TODO(zhm) what is this?\n        return fail('SubLink', node);\n        // MULTIEXPR_SUBLINK\n        // format('(%s)', @deparse(node.subselect))\n      case node.subLinkType === 6:\n        return format('ARRAY (%s)', this.deparse(node.subselect));\n      default:\n        return fail('SubLink', node);\n    }\n  }\n\n  ['TypeCast'](node) {\n    const type = this.deparse(node.typeName);\n    if (type === 'boolean' && dotty.exists(node, 'arg.A_Const.val.String.str')) {\n      const value = dotty.get(node, 'arg.A_Const.val.String.str');\n      if (value === 'f') {\n        return '(FALSE)';\n      }\n      if (value === 't') {\n        return '(TRUE)';\n      }\n    }\n    return this.deparse(node.arg) + '::' + this.deparse(node.typeName);\n  }\n\n  ['TypeName'](node) {\n    if (_.last(node.names).String.str === 'interval') {\n      return this.deparseInterval(node);\n    }\n\n    const output = [];\n\n    if (node.setof) {\n      output.push('SETOF');\n    }\n\n    let args = null;\n\n    if (node.typmods != null) {\n      args = node.typmods.map(item => {\n        return this.deparse(item);\n      });\n    }\n\n    const type = [];\n\n    type.push(this.type(node.names, args && args.join(', ')));\n\n    if (node.arrayBounds != null) {\n      type.push('[]');\n    }\n\n    output.push(type.join(''));\n\n    return output.join(' ');\n  }\n\n  ['CaseWhen'](node) {\n    const output = [ 'WHEN' ];\n\n    output.push(this.deparse(node.expr));\n    output.push('THEN');\n    output.push(this.deparse(node.result));\n\n    return output.join(' ');\n  }\n\n  ['WindowDef'](node, context) {\n    const output = [];\n\n    if (context !== 'window') {\n      if (node.name) {\n        output.push(node.name);\n      }\n    }\n\n    const empty = (!(node.partitionClause != null) && !(node.orderClause != null));\n\n    const frameOptions = this.deparseFrameOptions(node.frameOptions, node.refname, node.startOffset, node.endOffset);\n\n    if (empty && context !== 'window' && !(node.name != null) && frameOptions.length === 0) {\n      return '()';\n    }\n\n    const windowParts = [];\n\n    let useParens = false;\n\n    if (node.partitionClause) {\n      const partition = [ 'PARTITION BY' ];\n\n      const clause = node.partitionClause.map(item => this.deparse(item));\n\n      partition.push(clause.join(', '));\n\n      windowParts.push(partition.join(' '));\n      useParens = true;\n    }\n\n    if (node.orderClause) {\n      windowParts.push('ORDER BY');\n\n      const orders = node.orderClause.map(item => {\n        return this.deparse(item);\n      });\n\n      windowParts.push(orders.join(', '));\n\n      useParens = true;\n    }\n\n    if (frameOptions.length) {\n      useParens = true;\n      windowParts.push(frameOptions);\n    }\n\n    if (useParens && context !== 'window') {\n      return output.join(' ') + ' (' + windowParts.join(' ') + ')';\n    }\n\n    return output.join(' ') + windowParts.join(' ');\n  }\n\n  ['WithClause'](node) {\n    const output = [ 'WITH' ];\n\n    if (node.recursive) {\n      output.push('RECURSIVE');\n    }\n\n    output.push(this.list(node.ctes));\n\n    return output.join(' ');\n  }\n\n  deparseFrameOptions(options, refName, startOffset, endOffset) {\n    const FRAMEOPTION_NONDEFAULT = 0x00001; // any specified?\n    const FRAMEOPTION_RANGE = 0x00002; // RANGE behavior\n    const FRAMEOPTION_ROWS = 0x00004; // ROWS behavior\n    const FRAMEOPTION_BETWEEN = 0x00008; // BETWEEN given?\n    const FRAMEOPTION_START_UNBOUNDED_PRECEDING = 0x00010; // start is U. P.\n    const FRAMEOPTION_END_UNBOUNDED_PRECEDING = 0x00020; // (disallowed)\n    const FRAMEOPTION_START_UNBOUNDED_FOLLOWING = 0x00040; // (disallowed)\n    const FRAMEOPTION_END_UNBOUNDED_FOLLOWING = 0x00080; // end is U. F.\n    const FRAMEOPTION_START_CURRENT_ROW = 0x00100; // start is C. R.\n    const FRAMEOPTION_END_CURRENT_ROW = 0x00200; // end is C. R.\n    const FRAMEOPTION_START_VALUE_PRECEDING = 0x00400; // start is V. P.\n    const FRAMEOPTION_END_VALUE_PRECEDING = 0x00800; // end is V. P.\n    const FRAMEOPTION_START_VALUE_FOLLOWING = 0x01000; // start is V. F.\n    const FRAMEOPTION_END_VALUE_FOLLOWING = 0x02000; // end is V. F.\n\n    if (!(options & FRAMEOPTION_NONDEFAULT)) {\n      return '';\n    }\n\n    const output = [];\n\n    if (refName != null) {\n      output.push(refName);\n    }\n\n    if (options & FRAMEOPTION_RANGE) {\n      output.push('RANGE');\n    }\n\n    if (options & FRAMEOPTION_ROWS) {\n      output.push('ROWS');\n    }\n\n    const between = options & FRAMEOPTION_BETWEEN;\n\n    if (between) {\n      output.push('BETWEEN');\n    }\n\n    if (options & FRAMEOPTION_START_UNBOUNDED_PRECEDING) {\n      output.push('UNBOUNDED PRECEDING');\n    }\n\n    if (options & FRAMEOPTION_START_UNBOUNDED_FOLLOWING) {\n      output.push('UNBOUNDED FOLLOWING');\n    }\n\n    if (options & FRAMEOPTION_START_CURRENT_ROW) {\n      output.push('CURRENT ROW');\n    }\n\n    if (options & FRAMEOPTION_START_VALUE_PRECEDING) {\n      output.push(this.deparse(startOffset) + ' PRECEDING');\n    }\n\n    if (options & FRAMEOPTION_START_VALUE_FOLLOWING) {\n      output.push(this.deparse(startOffset) + ' FOLLOWING');\n    }\n\n    if (between) {\n      output.push('AND');\n\n      if (options & FRAMEOPTION_END_UNBOUNDED_PRECEDING) {\n        output.push('UNBOUNDED PRECEDING');\n      }\n\n      if (options & FRAMEOPTION_END_UNBOUNDED_FOLLOWING) {\n        output.push('UNBOUNDED FOLLOWING');\n      }\n\n      if (options & FRAMEOPTION_END_CURRENT_ROW) {\n        output.push('CURRENT ROW');\n      }\n\n      if (options & FRAMEOPTION_END_VALUE_PRECEDING) {\n        output.push(this.deparse(endOffset) + ' PRECEDING');\n      }\n\n      if (options & FRAMEOPTION_END_VALUE_FOLLOWING) {\n        output.push(this.deparse(endOffset) + ' FOLLOWING');\n      }\n    }\n\n    return output.join(' ');\n  }\n\n  deparseInterval(node) {\n    const type = [ 'interval' ];\n\n    if (node.arrayBounds != null) {\n      type.push('[]');\n    }\n\n    if (node.typmods) {\n      const typmods = node.typmods.map(item => this.deparse(item));\n\n      let intervals = this.interval(typmods[0]);\n\n      // SELECT interval(0) '1 day 01:23:45.6789'\n      if (node.typmods[0] && node.typmods[0].A_Const && node.typmods[0].A_Const.val.Integer.ival === 32767 && node.typmods[1] && (node.typmods[1].A_Const != null)) {\n        intervals = [ `(${node.typmods[1].A_Const.val.Integer.ival})` ];\n      } else {\n        intervals = intervals.map(part => {\n          if (part === 'second' && typmods.length === 2) {\n            return 'second(' + _.last(typmods) + ')';\n          }\n\n          return part;\n        });\n      }\n\n      type.push(intervals.join(' to '));\n    }\n\n    return type.join(' ');\n  }\n\n  interval(mask) {\n    // ported from https://github.com/lfittl/pg_query/blob/master/lib/pg_query/deparse/interval.rb\n    if (this.MASKS == null) {\n      this.MASKS = {\n        0: 'RESERV',\n        1: 'MONTH',\n        2: 'YEAR',\n        3: 'DAY',\n        4: 'JULIAN',\n        5: 'TZ',\n        6: 'DTZ',\n        7: 'DYNTZ',\n        8: 'IGNORE_DTF',\n        9: 'AMPM',\n        10: 'HOUR',\n        11: 'MINUTE',\n        12: 'SECOND',\n        13: 'MILLISECOND',\n        14: 'MICROSECOND',\n        15: 'DOY',\n        16: 'DOW',\n        17: 'UNITS',\n        18: 'ADBC',\n        19: 'AGO',\n        20: 'ABS_BEFORE',\n        21: 'ABS_AFTER',\n        22: 'ISODATE',\n        23: 'ISOTIME',\n        24: 'WEEK',\n        25: 'DECADE',\n        26: 'CENTURY',\n        27: 'MILLENNIUM',\n        28: 'DTZMOD'\n      };\n    }\n\n    if (this.BITS == null) {\n      this.BITS = _.invert(this.MASKS);\n    }\n\n    if (this.INTERVALS == null) {\n      this.INTERVALS = {};\n      this.INTERVALS[(1 << this.BITS.YEAR)] = [ 'year' ];\n      this.INTERVALS[(1 << this.BITS.MONTH)] = [ 'month' ];\n      this.INTERVALS[(1 << this.BITS.DAY)] = [ 'day' ];\n      this.INTERVALS[(1 << this.BITS.HOUR)] = [ 'hour' ];\n      this.INTERVALS[(1 << this.BITS.MINUTE)] = [ 'minute' ];\n      this.INTERVALS[(1 << this.BITS.SECOND)] = [ 'second' ];\n      this.INTERVALS[((1 << this.BITS.YEAR) | (1 << this.BITS.MONTH))] = [ 'year', 'month' ];\n      this.INTERVALS[((1 << this.BITS.DAY) | (1 << this.BITS.HOUR))] = [ 'day', 'hour' ];\n      this.INTERVALS[((1 << this.BITS.DAY) | (1 << this.BITS.HOUR) | (1 << this.BITS.MINUTE))] = [ 'day', 'minute' ];\n      this.INTERVALS[((1 << this.BITS.DAY) | (1 << this.BITS.HOUR) | (1 << this.BITS.MINUTE) | (1 << this.BITS.SECOND))] = [ 'day', 'second' ];\n      this.INTERVALS[((1 << this.BITS.HOUR) | (1 << this.BITS.MINUTE))] = [ 'hour', 'minute' ];\n      this.INTERVALS[((1 << this.BITS.HOUR) | (1 << this.BITS.MINUTE) | (1 << this.BITS.SECOND))] = [ 'hour', 'second' ];\n      this.INTERVALS[((1 << this.BITS.MINUTE) | (1 << this.BITS.SECOND))] = [ 'minute', 'second' ];\n\n      // utils/timestamp.h\n      // #define INTERVAL_FULL_RANGE (0x7FFF)\n      this.INTERVALS[this.INTERVAL_FULL_RANGE = '32767'] = [];\n    }\n\n    return this.INTERVALS[mask.toString()];\n  }\n}\n"]}